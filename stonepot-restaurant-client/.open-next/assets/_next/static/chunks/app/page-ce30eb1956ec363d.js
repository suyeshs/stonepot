(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2295:function(e,t,s){Promise.resolve().then(s.bind(s,5551))},5551:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return H}});var a=s(7821),n=s(8078);class i{async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",t=arguments.length>1?arguments[1]:void 0;return new Promise((s,a)=>{try{console.log("[VertexAILive] Connecting to:",this.wsUrl),this.ws=new WebSocket(this.wsUrl),this.ws.onopen=()=>{console.log("[VertexAILive] WebSocket connected"),this.isConnected=!0,this.sendMessage({type:"start_session",config:{language:e,userId:t,systemInstruction:null}})},this.ws.onmessage=e=>{if(e.data instanceof ArrayBuffer||e.data instanceof Blob){let t=e.data instanceof ArrayBuffer?e.data.byteLength:e.data.size;console.log("[VertexAILive] Received audio:",t,"bytes"),e.data instanceof Blob?e.data.arrayBuffer().then(e=>{this.audioCallback&&this.audioCallback(e)}):this.audioCallback&&this.audioCallback(e.data);return}try{let t=JSON.parse(e.data);console.log("[VertexAILive] Received message:",t.type),"session_started"===t.type&&(this.sessionId=t.sessionId,this.sessionReady=!0,console.log("[VertexAILive] Session started and ready:",this.sessionId),s()),"session_ready"!==t.type||(console.log("[VertexAILive] Session ready confirmation"),this.sessionReady=!0,this.sessionId||s()),"error"===t.type&&(console.error("[VertexAILive] Error from server:",t.error),this.errorCallback&&this.errorCallback(t.error)),this.messageCallback&&this.messageCallback(t)}catch(t){console.warn("[VertexAILive] Non-JSON message:",e.data)}},this.ws.onerror=e=>{console.error("[VertexAILive] WebSocket error:",e),this.errorCallback&&this.errorCallback("WebSocket connection error"),a(Error("WebSocket connection failed"))},this.ws.onclose=e=>{console.log("[VertexAILive] WebSocket closed:",e.code,e.reason),this.isConnected=!1,this.sessionReady=!1,this.sessionId=null},setTimeout(()=>{this.sessionId||a(Error("Session start timeout"))},1e4)}catch(e){console.error("[VertexAILive] Connection error:",e),a(e)}})}sendAudio(e){if(!this.isConnected||!this.ws){console.warn("[VertexAILive] Cannot send audio - not connected");return}this.ws.readyState===WebSocket.OPEN?(this.ws.send(e),console.log("[VertexAILive] Sent audio:",e.byteLength,"bytes")):console.warn("[VertexAILive] WebSocket not open, readyState:",this.ws.readyState)}sendMessage(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&(this.ws.send(JSON.stringify(e)),console.log("[VertexAILive] Sent message:",e.type))}sendTurnComplete(){this.sendMessage({type:"turn_complete"})}interrupt(){console.log("[VertexAILive] Sending interruption signal"),this.sendMessage({type:"interrupt"})}onAudio(e){this.audioCallback=e}onMessage(e){this.messageCallback=e}onError(e){this.errorCallback=e}disconnect(){this.ws&&(this.sendMessage({type:"end_session"}),setTimeout(()=>{this.ws&&(this.ws.close(),this.ws=null)},500)),this.isConnected=!1,this.sessionReady=!1,this.sessionId=null}isActive(){return this.isConnected&&this.sessionReady&&null!==this.ws&&this.ws.readyState===WebSocket.OPEN}getSessionId(){return this.sessionId}constructor(e){if(this.ws=null,this.sessionId=null,this.isConnected=!1,this.sessionReady=!1,this.audioCallback=null,this.messageCallback=null,this.errorCallback=null,e)this.wsUrl=e;else{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;this.wsUrl="".concat(e,"//").concat(t,"/api/vertex-ai-live")}}}class r{connect(e){return new Promise((t,s)=>{let a=this.workerUrl.replace("https://","wss://").replace("http://","ws://");this.ws=new WebSocket("".concat(a,"/session/").concat(e,"/display")),this.ws.onopen=()=>{console.log("Display WebSocket connected"),this.reconnectAttempts=0,t()},this.ws.onmessage=e=>{try{let t=JSON.parse(e.data);this.handleMessage(t)}catch(e){console.error("Error parsing WebSocket message:",e)}},this.ws.onerror=e=>{console.error("WebSocket error:",e),s(e)},this.ws.onclose=()=>{console.log("WebSocket closed, attempting reconnect..."),this.attemptReconnect(e)}})}handleMessage(e){"initial_state"===e.type?this.emit("initial_state",e.state):"update"===e.type?this.emit("update",e.update):e.type}attemptReconnect(e){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnect attempts reached"),this.emit("error",Error("Failed to reconnect"));return}this.reconnectAttempts++,setTimeout(()=>{console.log("Reconnect attempt ".concat(this.reconnectAttempts,"...")),this.connect(e).catch(e=>{console.error("Reconnect failed:",e)})},this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1))}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){let s=this.listeners.get(e);s&&s.delete(t)}emit(e,t){let s=this.listeners.get(e);s&&s.forEach(e=>e(t))}sendPing(){var e;(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"ping"}))}sendAction(e,t){var s;if((null===(s=this.ws)||void 0===s?void 0:s.readyState)===WebSocket.OPEN){let s={type:"user_action",action:e,data:t,timestamp:Date.now()};this.ws.send(JSON.stringify(s)),console.log("[DisplayWebSocket] Sent action:",e,t)}else console.error("[DisplayWebSocket] Cannot send action - WebSocket not connected")}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}constructor(e){this.workerUrl=e,this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.listeners=new Map}}function l(e){let{data:t,onAction:s}=e;return(0,a.jsxs)("div",{className:"neu-card overflow-hidden hover-lift animate-fade-in",children:[t.imageUrl&&(0,a.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200",children:(0,a.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold neu-text mb-1",children:t.name}),t.category&&(0,a.jsx)("span",{className:"text-xs neu-text-secondary uppercase tracking-wide",children:t.category})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold neu-text-accent",children:["₹",t.price]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t.rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-yellow-500",children:"⭐"}),(0,a.jsx)("span",{className:"font-semibold neu-text",children:t.rating.toFixed(1)})]}),t.type&&(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("veg"===t.type?"bg-green-100 text-green-700 border border-green-300":"bg-red-100 text-red-700 border border-red-300"),children:"veg"===t.type?"\uD83C\uDF31 Veg":"\uD83C\uDF56 Non-Veg"}),t.spiceLevel&&t.spiceLevel>0&&(0,a.jsx)("span",{className:"flex items-center gap-1",children:"\uD83C\uDF36️".repeat(Math.min(t.spiceLevel,5))})]}),t.description&&(0,a.jsx)("p",{className:"text-sm neu-text-secondary leading-relaxed",children:t.description}),t.dietary&&t.dietary.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.dietary.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs neu-concave neu-text-secondary",children:e},t))}),(0,a.jsx)("button",{onClick:()=>{null==s||s("add_to_cart_verbal",{dishName:t.name,quantity:1})},disabled:!1===t.available,className:"w-full neu-button-accent rounded-xl px-6 py-3 text-base font-semibold transition-all ".concat(!1===t.available?"opacity-50 cursor-not-allowed":""),children:!1===t.available?"Not Available":"Add to Cart • ₹".concat(t.price)})]})]})}function c(e){var t;let{data:s,onAction:i}=e,[r,l]=(0,n.useState)(!1),[c,o]=(0,n.useState)((null===(t=s.choices)||void 0===t?void 0:t[0])||"");return(0,a.jsxs)("div",{className:"neu-card overflow-hidden hover-lift animate-fade-in",children:[s.imageUrl&&(0,a.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200",children:[(0,a.jsx)("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}),s.tag&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,a.jsx)("span",{children:"\uD83D\uDD25"}),(0,a.jsx)("span",{children:s.tag})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold neu-text mb-1",children:s.name}),(0,a.jsx)("span",{className:"text-xs neu-text-secondary uppercase tracking-wide",children:"Combo Meal"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold neu-text-accent",children:["₹",s.price]})]}),s.description&&(0,a.jsx)("p",{className:"text-sm neu-text-secondary leading-relaxed",children:s.description}),c&&(0,a.jsxs)("div",{className:"neu-concave p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs neu-text-secondary mb-1",children:"Selected:"}),(0,a.jsx)("p",{className:"text-sm font-semibold neu-text",children:c})]}),s.choices&&s.choices.length>0&&(0,a.jsx)("button",{onClick:()=>l(!r),className:"text-sm font-semibold text-blue-500 hover:text-blue-600",children:r?"Hide Options":"Customize"}),r&&s.choices&&(0,a.jsxs)("div",{className:"neu-concave rounded-lg overflow-hidden animate-fade-in",children:[(0,a.jsx)("p",{className:"text-xs font-semibold neu-text p-3 border-b border-gray-200",children:"Choose your option:"}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:s.choices.map((e,t)=>(0,a.jsxs)("label",{className:"flex items-center p-3 cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"combo-choice",value:e,checked:c===e,onChange:()=>o(e),className:"mr-3"}),(0,a.jsx)("span",{className:"text-sm neu-text",children:e})]},t))})]}),(0,a.jsx)("button",{onClick:()=>{null==i||i("add_to_cart_verbal",{dishName:s.name,quantity:1,customizations:c})},disabled:!1===s.available,className:"w-full neu-button-accent rounded-xl px-6 py-3 text-base font-semibold transition-all ".concat(!1===s.available?"opacity-50 cursor-not-allowed":""),children:!1===s.available?"Not Available":"Add to Cart • ₹".concat(s.price)})]})]})}function o(e){let{visualData:t,onAction:s}=e;if(!t)return null;let{type:n,data:i}=t;switch(n){case"dish_card":if((null==i?void 0:i.choices)||(null==i?void 0:i.category)==="combos")return(0,a.jsx)(c,{data:i,onAction:s});return(0,a.jsx)(l,{data:i,onAction:s});case"menu_item":return(0,a.jsx)(l,{data:i,onAction:s});case"combo_item":return(0,a.jsx)(c,{data:i,onAction:s});case"menu_section":return(0,a.jsx)(m,{data:i});case"order_summary":case"cart_updated":return(0,a.jsx)(u,{data:i,onAction:s});case"cart_item_added":return(0,a.jsx)(d,{data:i});case"confirmation":return(0,a.jsx)(x,{data:i});case"webpage":return(0,a.jsx)(h,{url:null==i?void 0:i.url});case"snippet":return(0,a.jsx)(p,{content:null==i?void 0:i.content,title:null==i?void 0:i.title});default:return(0,a.jsxs)("div",{className:"p-4 bg-gray-100 rounded",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Unknown display type: ",n]}),(0,a.jsx)("pre",{className:"mt-2 text-xs overflow-auto",children:JSON.stringify(t,null,2)})]})}}function d(e){let{data:t}=e;return(0,a.jsx)("div",{className:"neu-card animate-fade-in border-l-4 border-green-500",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4",children:[(0,a.jsx)("div",{className:"text-2xl",children:"✅"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-lg font-bold neu-text-accent mb-1",children:"Added to Cart"}),(0,a.jsxs)("p",{className:"text-sm neu-text",children:[t.item.quantity,"x ",t.item.dishName," • ₹",t.item.itemTotal]}),(0,a.jsxs)("p",{className:"text-xs neu-text-secondary mt-2",children:["Cart Total: ₹",t.cart.total]})]})]})})}function u(e){let{data:t,onAction:s}=e;if(!t||!t.items||0===t.items.length)return(0,a.jsx)("div",{className:"text-center neu-text-secondary py-8",children:(0,a.jsx)("p",{className:"text-sm",children:"Your cart is empty"})});let n=e=>{null==s||s("remove_from_cart",{itemId:e})},i=(e,t,a)=>{null==s||s("update_quantity",{itemId:e,action:t,newQuantity:"increment"===t?a+1:Math.max(1,a-1)})};return(0,a.jsxs)("div",{className:"neu-card overflow-hidden animate-fade-in",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-xl font-bold neu-text",children:"\uD83D\uDED2 Your Order"}),(0,a.jsxs)("p",{className:"text-sm neu-text-secondary mt-1",children:[t.items.length," item",1!==t.items.length?"s":""]})]}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:t.items.map(e=>(0,a.jsx)("div",{className:"p-4 hover-lift transition-all",children:(0,a.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-semibold neu-text",children:e.dishName}),e.customizations&&e.customizations.length>0&&(0,a.jsx)("p",{className:"text-xs neu-text-secondary mt-1",children:e.customizations.join(", ")}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsx)("button",{onClick:()=>i(e.id,"decrement",e.quantity),className:"w-8 h-8 flex items-center justify-center neu-button rounded-lg text-sm font-bold",children:"−"}),(0,a.jsx)("span",{className:"text-sm font-medium neu-text min-w-[2rem] text-center",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>i(e.id,"increment",e.quantity),className:"w-8 h-8 flex items-center justify-center neu-button rounded-lg text-sm font-bold",children:"+"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-bold neu-text",children:["₹",e.itemTotal]}),(0,a.jsx)("button",{onClick:()=>n(e.id),className:"text-xs text-red-500 hover:text-red-700 mt-2 transition-colors font-medium",children:"Remove"})]})]})},e.id))}),(0,a.jsxs)("div",{className:"px-6 py-4 space-y-2 border-t border-gray-200 neu-concave",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"neu-text-secondary",children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-medium neu-text",children:["₹",t.subtotal]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"neu-text-secondary",children:"Tax (5%)"}),(0,a.jsxs)("span",{className:"font-medium neu-text",children:["₹",t.tax]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-300",children:[(0,a.jsx)("span",{className:"neu-text",children:"Total"}),(0,a.jsxs)("span",{className:"neu-text-accent",children:["₹",t.total]})]})]})]})}function m(e){let{data:t}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-white shadow",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"\uD83D\uDCCB Menu Section"}),(0,a.jsx)("pre",{className:"mt-2 text-xs overflow-auto",children:JSON.stringify(t,null,2)})]})}function x(e){let{data:t}=e;return(0,a.jsx)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-6 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-4xl",children:"✅"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-green-400",children:"Order Confirmed!"}),(null==t?void 0:t.message)&&(0,a.jsx)("p",{className:"text-sm text-green-300",children:t.message})]})})}function h(e){let{url:t}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-white shadow",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"\uD83C\uDF10 Web Page"}),(0,a.jsxs)("p",{className:"mt-2",children:["URL: ",t]}),t&&(0,a.jsx)("iframe",{src:t,className:"w-full h-96 mt-4 border rounded",sandbox:"allow-scripts allow-same-origin"})]})}function p(e){let{content:t,title:s}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-white shadow",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold",children:["\uD83D\uDCDD ",s||"Snippet"]}),(0,a.jsx)("div",{className:"mt-4 prose",children:t})]})}function g(e){let{currentStep:t,totalSteps:s,steps:n}=e,i=t/s*100;return(0,a.jsxs)("div",{className:"neu-progress-orb",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold neu-text-accent mb-1",children:[t,"/",s]}),(0,a.jsx)("div",{className:"text-xs neu-text-secondary font-medium",children:n[t-1]})]}),(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full",style:{transform:"rotate(-90deg)"},children:[(0,a.jsx)("circle",{cx:"50%",cy:"50%",r:"48%",fill:"none",stroke:"rgba(0,0,0,0.1)",strokeWidth:"4"}),(0,a.jsx)("circle",{cx:"50%",cy:"50%",r:"48%",fill:"none",stroke:"var(--neu-accent)",strokeWidth:"4",strokeDasharray:"".concat(3*i," 300"),strokeLinecap:"round",style:{transition:"stroke-dasharray 0.3s ease"}})]})]})}var b=s(7472),y=s(8149),f=s(7729),j=s(9044),v=s(1166),N=s(5189),w=s(4649);class C{addMenuItem(e){let t=this.items.find(t=>t.name===e.name&&t.type===e.type&&!t.customization);t?t.quantity+=1:this.items.push({name:e.name,price:e.price,quantity:1,type:e.type,imageUrl:e.imageUrl})}addComboItem(e,t){let s=this.items.find(s=>s.name===e.name&&s.customization===t);s?s.quantity+=1:this.items.push({name:e.name,price:e.price,quantity:1,type:e.type,customization:t,imageUrl:e.imageUrl})}updateQuantity(e,t,s){let a=this.items.find(s=>s.name===e&&s.type===t);a&&(a.quantity=s)}removeItem(e,t){this.items=this.items.filter(s=>!(s.name===e&&s.type===t))}get total(){return this.items.reduce((e,t)=>e+t.price*t.quantity,0)}get itemCount(){return this.items.reduce((e,t)=>e+t.quantity,0)}clearCart(){this.items=[]}constructor(){this.items=[],(0,w.ky)(this)}}let k=new C,S=(0,b.Pi)(function(){return 0===k.items.length?(0,a.jsx)("div",{className:"neu-card p-8 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"neu-icon-container w-20 h-20",children:(0,a.jsx)(f.Z,{className:"w-10 h-10 neu-text-secondary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold neu-text mb-2",children:"Your cart is empty"}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary",children:"Add items from the menu to get started"})]})]})}):(0,a.jsxs)("div",{className:"neu-card",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold neu-text flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5"}),"Your Cart (",k.itemCount," items)"]}),k.items.length>0&&(0,a.jsxs)("button",{onClick:()=>k.clearCart(),className:"neu-button-small neu-button-ghost text-red-500 hover:text-red-600",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"Clear"]})]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200/50",children:k.items.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 hover:bg-gray-50/30 transition-colors",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[e.imageUrl&&(0,a.jsx)("div",{className:"neu-image-container flex-shrink-0",children:(0,a.jsx)(y.default,{src:e.imageUrl,alt:e.name,width:80,height:80,className:"rounded-lg object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-medium neu-text",children:e.name}),(0,a.jsx)("span",{className:"neu-badge ".concat("veg"===e.type?"neu-badge-success":"neu-badge-error"),children:"veg"===e.type?"\uD83D\uDFE2 Veg":"\uD83D\uDD34 Non-Veg"})]}),e.customization&&(0,a.jsxs)("p",{className:"text-sm neu-text-secondary mt-1",children:["With ",e.customization]}),(0,a.jsxs)("p",{className:"text-sm font-semibold neu-text-accent mt-1",children:["₹",e.price]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{e.quantity>1&&k.updateQuantity(e.name,e.type,e.quantity-1)},className:"neu-button-icon neu-button-small",disabled:e.quantity<=1,children:(0,a.jsx)(v.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"w-12 text-center font-semibold neu-text",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>k.updateQuantity(e.name,e.type,e.quantity+1),className:"neu-button-icon neu-button-small",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("button",{onClick:()=>k.removeItem(e.name,e.type),className:"neu-button-icon neu-button-small neu-button-ghost text-red-500 hover:text-red-600",children:(0,a.jsx)(j.Z,{className:"w-4 h-4"})})]})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200/30 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm neu-text-secondary",children:"Item Total"}),(0,a.jsxs)("span",{className:"font-semibold neu-text",children:["₹",e.price*e.quantity]})]})]},"".concat(e.name,"-").concat(e.customization||"default","-").concat(t)))}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200/50 bg-gray-50/30",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"neu-text",children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-semibold neu-text",children:["₹",k.total]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"neu-text-secondary",children:"Taxes & Fees"}),(0,a.jsx)("span",{className:"neu-text-secondary",children:"Calculated at checkout"})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200/50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("span",{className:"text-lg font-semibold neu-text",children:"Total"}),(0,a.jsxs)("span",{className:"text-2xl font-bold neu-text-accent",children:["₹",k.total]})]}),(0,a.jsx)("button",{className:"neu-button neu-button-primary w-full",children:"Proceed to Checkout"})]})]})]})}),A=(0,b.Pi)(function(e){let{onClick:t}=e;return 0===k.itemCount?null:(0,a.jsxs)("button",{onClick:t,className:"fixed bottom-24 right-6 neu-card p-4 shadow-lg hover:shadow-xl transition-all duration-300 z-40 group",style:{minWidth:"180px",animation:"slideInRight 0.3s ease-out"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"neu-icon-container w-12 h-12",children:(0,a.jsx)(f.Z,{className:"w-6 h-6 neu-text-accent"})}),k.itemCount>0&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 neu-badge neu-badge-primary w-6 h-6 flex items-center justify-center text-xs font-bold",children:k.itemCount})]}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsxs)("div",{className:"text-xs neu-text-secondary font-medium",children:[k.itemCount," ",1===k.itemCount?"item":"items"]}),(0,a.jsxs)("div",{className:"text-sm font-bold neu-text-accent",children:["₹",k.total]})]})]}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-green-500/10 opacity-0 group-hover:opacity-100 transition-opacity"})]})});var I=s(5353),D=s(6744),R=s(2212);function T(e){let{onStartConversation:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12",children:(0,a.jsxs)("div",{className:"max-w-2xl w-full text-center",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 neu-card rounded-3xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-4xl",children:"\uD83C\uDF7D️"})}),(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold neu-text mb-2",children:"Welcome to The Coorg Food Company"}),(0,a.jsx)("p",{className:"text-base md:text-lg neu-text-secondary",children:"Order your favorite dishes with your voice"})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"neu-card rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,a.jsx)(I.Z,{className:"w-5 h-5 neu-text"}),(0,a.jsx)("h2",{className:"text-sm font-semibold neu-text uppercase tracking-wide",children:"Languages Supported"})]}),(0,a.jsx)("div",{className:"flex items-center justify-center gap-6",children:[{code:"en",name:"English",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"hi",name:"हिन्दी",flag:"\uD83C\uDDEE\uD83C\uDDF3"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 neu-concave rounded-xl px-4 py-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:e.flag}),(0,a.jsx)("span",{className:"font-medium neu-text",children:e.name})]},e.code))})]})}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"neu-card rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6",children:[(0,a.jsx)(D.Z,{className:"w-5 h-5 neu-text"}),(0,a.jsx)("h2",{className:"text-sm font-semibold neu-text uppercase tracking-wide",children:"Try asking me..."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{icon:"\uD83C\uDF5B",text:"What's your best dish?",category:"Recommendations"},{icon:"\uD83C\uDF36️",text:"Show me spicy dishes",category:"Browse"},{icon:"\uD83E\uDD57",text:"I need vegetarian options",category:"Dietary"},{icon:"\uD83C\uDFAF",text:"What's popular today?",category:"Trending"},{icon:"\uD83D\uDCB0",text:"What combos do you have?",category:"Value"},{icon:"⏱️",text:"What can I get quickly?",category:"Quick"}].map((e,s)=>(0,a.jsx)("button",{onClick:t,className:"neu-concave rounded-xl p-4 text-left hover:scale-[1.02] active:scale-[0.98] transition-all group",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-2xl flex-shrink-0",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-sm font-medium neu-text group-hover:text-blue-500 transition-colors",children:['"',e.text,'"']}),(0,a.jsx)("p",{className:"text-xs neu-text-secondary mt-1",children:e.category})]})]})},s))})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"neu-concave rounded-xl p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83C\uDFA4"}),(0,a.jsx)("h3",{className:"text-sm font-semibold neu-text mb-1",children:"Voice-First"}),(0,a.jsx)("p",{className:"text-xs neu-text-secondary",children:"Natural conversation, hands-free ordering"})]}),(0,a.jsxs)("div",{className:"neu-concave rounded-xl p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"⚡"}),(0,a.jsx)("h3",{className:"text-sm font-semibold neu-text mb-1",children:"Real-Time"}),(0,a.jsx)("p",{className:"text-xs neu-text-secondary",children:"Instant responses, visual feedback"})]}),(0,a.jsxs)("div",{className:"neu-concave rounded-xl p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83C\uDFAF"}),(0,a.jsx)("h3",{className:"text-sm font-semibold neu-text mb-1",children:"Smart"}),(0,a.jsx)("p",{className:"text-xs neu-text-secondary",children:"Personalized recommendations"})]})]}),(0,a.jsxs)("div",{className:"neu-card rounded-2xl p-6 bg-blue-500/5 border border-blue-500/20",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold neu-text mb-3 flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"ℹ️"}),"How it works"]}),(0,a.jsxs)("ol",{className:"text-sm neu-text-secondary text-left space-y-2",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-blue-500",children:"1."}),(0,a.jsx)("span",{children:"Tap the microphone button below to start"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-blue-500",children:"2."}),(0,a.jsx)("span",{children:"Allow microphone access when prompted"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-blue-500",children:"3."}),(0,a.jsx)("span",{children:"Start talking naturally about what you want"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-blue-500",children:"4."}),(0,a.jsx)("span",{children:"See dishes appear as you talk, add to cart with voice"})]})]})]})]})}),(0,a.jsxs)("div",{className:"fixed bottom-8 right-8 z-40",children:[(0,a.jsxs)("button",{onClick:t,className:"neu-fab group","aria-label":"Start voice conversation",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(R.Z,{className:"w-8 h-8 text-blue-500 group-hover:text-blue-600 transition-colors"}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),(0,a.jsx)("span",{className:"ml-4 font-semibold text-blue-500 group-hover:text-blue-600 transition-colors",children:"Start Ordering"})]}),(0,a.jsx)("div",{className:"absolute inset-0 neu-fab-pulse"})]})]})}class W{highlightItem(e){this.highlightedItemName=e,this.scrollToItemName=e,setTimeout(()=>{this.highlightedItemName===e&&(this.highlightedItemName=null)},5e3)}clearHighlight(){this.highlightedItemName=null}clearScrollTarget(){this.scrollToItemName=null}isHighlighted(e){return this.highlightedItemName===e}constructor(){this.highlightedItemName=null,this.scrollToItemName=null,(0,w.ky)(this)}}let V=new W;var U=s(4354),F=s(4313),M=(0,b.Pi)(e=>{let{item:t,highlighted:s}=e,[i,r]=(0,n.useState)(!1),[l,c]=(0,n.useState)(t.choices[0]),o=(0,n.useRef)(null),d=s||V.isHighlighted(t.name);(0,n.useEffect)(()=>{V.scrollToItemName===t.name&&o.current&&(o.current.scrollIntoView({behavior:"smooth",block:"center"}),V.clearScrollTarget())},[V.scrollToItemName,t.name]);let u=e=>{c(e),r(!1)};return(0,a.jsxs)("div",{ref:o,className:"neu-card overflow-hidden hover-lift transition-all duration-300 ".concat(d?"ring-4 ring-blue-400 shadow-2xl":""),children:[t.imageUrl&&(0,a.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200",children:[(0,a.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}),t.tag&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,a.jsx)("span",{children:"\uD83D\uDD25"}),(0,a.jsx)("span",{children:t.tag})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-xl font-bold neu-text mb-1",children:t.name}),(0,a.jsx)("span",{className:"text-xs neu-text-secondary uppercase tracking-wide",children:"Combo Meal"})]}),(0,a.jsxs)("div",{className:"text-lg font-bold neu-text-accent",children:["₹",t.price]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t.rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-yellow-500",children:"⭐"}),(0,a.jsx)("span",{className:"font-semibold neu-text",children:t.rating.toFixed(1)}),t.reviews&&(0,a.jsxs)("span",{className:"text-xs neu-text-secondary",children:["(",t.reviews,")"]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("veg"===t.type?"bg-green-100 text-green-700 border border-green-300":"bg-red-100 text-red-700 border border-red-300"),children:"veg"===t.type?"\uD83C\uDF31 Veg":"\uD83C\uDF56 Non-Veg"})]}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary leading-relaxed",children:t.description}),l&&(0,a.jsxs)("div",{className:"neu-concave p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs neu-text-secondary mb-1",children:"Selected:"}),(0,a.jsx)("p",{className:"text-sm font-semibold neu-text",children:l})]}),(0,a.jsx)("button",{onClick:()=>r(!i),className:"text-sm font-semibold text-blue-500 hover:text-blue-600",children:i?"Hide Options":"Customize"}),(0,a.jsx)(U.M,{children:i&&(0,a.jsxs)(F.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"neu-concave rounded-lg overflow-hidden",children:[(0,a.jsx)("p",{className:"text-xs font-semibold neu-text p-3 border-b border-gray-200",children:"Choose your option:"}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:t.choices.map((e,t)=>(0,a.jsxs)("label",{className:"flex items-center p-3 cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"combo-choice",value:e,checked:l===e,onChange:()=>u(e),className:"mr-3"}),(0,a.jsx)("span",{className:"text-sm neu-text",children:e})]},t))})]})}),(0,a.jsx)("button",{onClick:()=>{k.addComboItem(t,l)},disabled:!1===t.available,className:"w-full neu-button-accent rounded-xl px-6 py-3 text-base font-semibold transition-all ".concat(!1===t.available?"opacity-50 cursor-not-allowed":""),children:!1===t.available?"Not Available":"Add to Cart • ₹".concat(t.price)})]})]})}),P=(0,b.Pi)(e=>{let{item:t,highlighted:s}=e,[i,r]=(0,n.useState)(0),l=(0,n.useRef)(null),c=s||V.isHighlighted(t.name);return(0,n.useEffect)(()=>{let e=k.items.find(e=>e.name===t.name&&e.type===t.type);r(e?e.quantity:0)},[t.name,t.type,k.items.length]),(0,n.useEffect)(()=>{V.scrollToItemName===t.name&&l.current&&(l.current.scrollIntoView({behavior:"smooth",block:"center"}),V.clearScrollTarget())},[V.scrollToItemName,t.name]),(0,a.jsxs)("div",{ref:l,className:"neu-card overflow-hidden hover-lift transition-all duration-300 ".concat(c?"ring-4 ring-blue-400 shadow-2xl":""),children:[t.imageUrl&&(0,a.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200",children:[(0,a.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}),t.isBestseller&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,a.jsx)("span",{children:"\uD83D\uDD25"}),(0,a.jsx)("span",{children:"Bestseller"})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-xl font-bold neu-text mb-1",children:t.name}),(0,a.jsxs)("div",{className:"text-lg font-bold neu-text-accent",children:["₹",t.price]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t.rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-yellow-500",children:"⭐"}),(0,a.jsx)("span",{className:"font-semibold neu-text",children:t.rating.toFixed(1)}),t.reviews&&(0,a.jsxs)("span",{className:"text-xs neu-text-secondary",children:["(",t.reviews,")"]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("veg"===t.type?"bg-green-100 text-green-700 border border-green-300":"bg-red-100 text-red-700 border border-red-300"),children:"veg"===t.type?"\uD83C\uDF31 Veg":"\uD83C\uDF56 Non-Veg"})]}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary leading-relaxed",children:t.description}),0===i?(0,a.jsx)("button",{onClick:()=>{k.addMenuItem(t),r(1)},disabled:!1===t.available,className:"w-full neu-button-accent rounded-xl px-6 py-3 text-base font-semibold transition-all ".concat(!1===t.available?"opacity-50 cursor-not-allowed":""),children:!1===t.available?"Not Available":"Add to Cart • ₹".concat(t.price)}):(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 neu-concave rounded-xl overflow-hidden p-1",children:[(0,a.jsx)("button",{onClick:()=>{i>1?(k.updateQuantity(t.name,t.type,i-1),r(i-1)):1===i&&(k.removeItem(t.name,t.type),r(0))},className:"w-10 h-10 flex items-center justify-center neu-button rounded-lg font-bold",children:"−"}),(0,a.jsx)("span",{className:"px-4 font-semibold neu-text min-w-[2rem] text-center",children:i}),(0,a.jsx)("button",{onClick:()=>{k.updateQuantity(t.name,t.type,i+1),r(i+1)},className:"w-10 h-10 flex items-center justify-center neu-button rounded-lg font-bold",children:"+"})]}),(0,a.jsxs)("div",{className:"font-bold neu-text-accent",children:["₹",t.price*i]})]})]})]})});let _=[{name:"Veg Kuttu Curry Combo [serves 1]",price:199,description:"Puttus, Otti or Rice of your choice - serves One",category:"combos",type:"veg",tag:"bestseller",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/7770c2bb-c535-4854-6ee6-a356bb407300/public",available:!0,rating:4.5},{name:"Veg Curry Combo (Bimballe curry)",price:199,description:"Puttus, Otti or Rice of your choice - serves One",category:"combos",type:"veg",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/7770c2bb-c535-4854-6ee6-a356bb407300/public"},{name:"Egg Curry Combo -1ps Eggserve 1",price:240,description:"Choose any one Puttu / Rice of your choice",category:"combos",type:"non-veg",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/7770c2bb-c535-4854-6ee6-a356bb407300/public"},{name:"Pandi Curry Combo",price:255,description:"Choose any one Puttu / Rice of your choice",category:"combos",type:"non-veg",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/dc08d86c-83d9-466f-56fc-959070195600/public"},{name:"Koli Curry Combo (Chicken)",price:250,description:"Choose any one Puttu / Rice of your choice",category:"combos",type:"non-veg",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/7770c2bb-c535-4854-6ee6-a356bb407300/public"},{name:"Spicy Smoked Pork(onake Erachi)",price:460,description:"Onake Erachi Spicy Smoked Pork",category:"appetizers",rating:4.7,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Mutton Pepper Fry",price:460,description:"Mutton roasted in fresh pepper sourced from our estates in Coorg.",category:"appetizers",rating:4.6,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Pepper Chicken Fry(kodava Koli Bharthad",price:300,description:"Succulent pepper chicken fry.",category:"appetizers",rating:4.1,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/c4e60a3d-43a7-41d2-2b19-d64c18cc9600/public"},{name:"Chicken Cutlet-4ps",price:315,description:"Mildly spiced, soft chicken cutlets.",category:"appetizers",rating:4.1,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/c4e60a3d-43a7-41d2-2b19-d64c18cc9600/public"},{name:"Pork Fry (pandi Barthad)-220gm",price:340,description:"Slow cooked pork in traditional black masala.",category:"appetizers",rating:4.2,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/c4e60a3d-43a7-41d2-2b19-d64c18cc9600/public"},{name:"Veg Cutlet",price:225,description:"Check for the day special.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2a0b331f-03f2-4daa-b9a0-5f25e2d6df00/public"},{name:"Crispy Bhendi Fry",price:225,description:"Ladies finger batter fried to a crisp with spices.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/6ce44b67-2b64-4211-9f8f-4f22b921e700/public"},{name:"Tangy Bitter Gourd Fry(kaipake Fry)",price:225,description:"Tangy bitter gourd fried, and seasoned with chilli and lime.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/d20f696b-956c-4f89-bd05-679c3e5d3400/public"},{name:"Kadle Palya",price:210,description:"Steamed black chana seasoned in spices.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/cee7e8b9-efed-41e5-c10c-2417d02fa300/public"},{name:"Crispy Banana Fritters(bale Kai Fry)",price:225,description:"Crispy Tangy raw banana fritters.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Paputtu",price:60,description:"Traditional Coorgi rice cake",category:"ottis-puttus-rice",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Kadambuttu",price:60,description:"Rice dumplings",category:"ottis-puttus-rice",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Noolputtu",price:60,description:"String hoppers",category:"ottis-puttus-rice",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Pandi Curry",price:245,description:"Traditional Coorgi pork curry",category:"curries",type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Kadle Curry",price:165,description:"Black chickpea curry",category:"curries",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Koli Curry",price:225,description:"Spicy chicken curry",category:"curries",type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Payasam",price:80,description:"Sweet milk pudding with vermicelli",category:"desserts",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Elaneer Payasam",price:90,description:"Tender coconut pudding",category:"desserts",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Chikkrotti",price:70,description:"Traditional Coorgi sweet",category:"desserts",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Neer More",price:60,description:"Spiced buttermilk",category:"coolers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Fresh Lime Soda",price:70,description:"Refreshing lime soda",category:"coolers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Tender Coconut Water",price:80,description:"Natural coconut water",category:"coolers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Tomato Soup",price:90,description:"Classic tomato soup",category:"soups",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Chicken Sweet Corn Soup",price:110,description:"Creamy chicken and corn soup",category:"soups",type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Mushroom Soup",price:100,description:"Creamy mushroom soup",category:"soups",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"}],E=["all","combos","appetizers","ottis-puttus-rice","curries","desserts","coolers","soups"],O=(0,b.Pi)(()=>{let[e,t]=(0,n.useState)("all"),s=(0,n.useRef)(null),[i,r]=(0,n.useState)(!1),l=_.filter(t=>("all"===e||t.category===e)&&(!i||"veg"===t.type));return(0,n.useEffect)(()=>{if(s.current){let t=s.current.querySelector('[data-category="'.concat(e,'"]'));t&&t.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[e]),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center neu-text",children:"Our Menu"}),(0,a.jsx)("div",{className:"relative mb-6 overflow-hidden",children:(0,a.jsx)("div",{ref:s,className:"flex overflow-x-auto pb-2 gap-2",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:E.map(s=>(0,a.jsx)("button",{"data-category":s,className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 ".concat(e===s?"neu-button-accent":"neu-button"),onClick:()=>t(s),children:s.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")},s))})}),(0,a.jsxs)("div",{className:"flex justify-center items-center mb-6",children:[(0,a.jsx)("span",{className:"mr-3 text-sm font-medium neu-text",children:"All"}),(0,a.jsx)("button",{className:"w-14 h-7 rounded-full p-1 transition-all duration-300 ".concat(i?"bg-green-400":"bg-gray-300"),onClick:()=>r(!i),children:(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-white shadow-md transition-transform duration-300 ".concat(i?"translate-x-7":"translate-x-0")})}),(0,a.jsx)("span",{className:"ml-3 text-sm font-medium neu-text",children:"Veg Only"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((e,t)=>"combos"===e.category?(0,a.jsx)(M,{item:e},"".concat(e.name,"-").concat(t)):(0,a.jsx)(P,{item:e},"".concat(e.name,"-").concat(t)))}),0===l.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-lg neu-text-secondary",children:"No items found in this category"})})]})});var H=(0,b.Pi)(function(){let[e,t]=(0,n.useState)(!1),[s,l]=(0,n.useState)("idle"),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(null),[p,b]=(0,n.useState)(null),[y,f]=(0,n.useState)([]),[j,v]=(0,n.useState)(!0),[N,w]=(0,n.useState)(1),[C,I]=(0,n.useState)(!1),D=(0,n.useRef)(0),[R,W]=(0,n.useState)(Array(32).fill(0)),[U,F]=(0,n.useState)(0),M=(0,n.useRef)(null),P=(0,n.useRef)(null),E=(0,n.useRef)(null),H=(0,n.useRef)(0),Q=(0,n.useRef)(!1),L=(0,n.useRef)(0),z=(0,n.useRef)(null),X=(0,n.useRef)(null),q=(0,n.useRef)(null),B=(0,n.useRef)(0);(0,n.useEffect)(()=>{if(e){B.current=Date.now(),F(0);let e=setInterval(()=>{F(Math.floor((Date.now()-B.current)/1e3))},1e3);return()=>clearInterval(e)}F(0),B.current=0},[e]),(0,n.useEffect)(()=>{if(!e)return;let t=e=>{let t=e.target.scrollTop;t>D.current&&t>50?v(!1):t<D.current&&v(!0),D.current=t},s=document.querySelector("main");return null==s||s.addEventListener("scroll",t),()=>{null==s||s.removeEventListener("scroll",t)}},[e]);let K=()=>{if(q.current)return;let e=0,t=()=>{e+=.05,W(Array.from({length:32},(t,s)=>Math.abs(.15*Math.sin(e+.5*s)+.1*Math.sin(1.3*e-.3*s)))),q.current=requestAnimationFrame(t)};t()},Z=()=>{q.current&&(cancelAnimationFrame(q.current),q.current=null)},J=async()=>{try{console.log("[Restaurant] Starting session..."),l("listening"),console.log("[Restaurant] Requesting microphone permission..."),await Y(),console.log("[Restaurant] Microphone access granted");let e="https://stonepot-restaurant-334610188311.us-central1.run.app";console.log("[Restaurant] Creating backend session...");let s=await fetch("".concat(e,"/api/restaurant/sessions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:"demo-restaurant",userId:"demo-user",language:"en"})});if(!s.ok)throw Error("Failed to create session: ".concat(s.status));let a=await s.json();console.log("[Restaurant] Session created:",a),d(a);let n="".concat(e.replace("https://","wss://").replace("http://","ws://")).concat(a.websocketUrl);M.current=new i(n),M.current.onAudio(async e=>{console.log("[Restaurant] Audio response received"),await $(e)}),M.current.onMessage(e=>{console.log("[Restaurant] Message:",e.type),"session_ready"===e.type&&l("listening")}),await M.current.connect("en"),console.log("[Restaurant] Connected to Vertex AI Live");let c=new r("https://stonepot-restaurant-display.suyesh.workers.dev");h(c),await c.connect(a.sessionId),console.log("[Restaurant] Connected to display service"),c.on("initial_state",e=>{var t;console.log("[Restaurant] Initial state:",e),f(e.transcriptions||[]),(null===(t=e.displayUpdates)||void 0===t?void 0:t.length)>0&&b(e.displayUpdates[e.displayUpdates.length-1])}),c.on("update",e=>{if(console.log("[Restaurant] Display update:",e),"transcription"===e.type)f(t=>[...t,e]);else{var t,s;if(b(e),"order_summary"===e.type||"cart_updated"===e.type?w(2):("dish_card"===e.type||"menu_item"===e.type||"combo_item"===e.type)&&(w(1),(null===(s=e.data)||void 0===s?void 0:s.name)&&V.highlightItem(e.data.name)),"cart_item_added"===e.type&&(null===(t=e.data)||void 0===t?void 0:t.item)){let{dishName:t,quantity:s}=e.data.item;console.log("[Restaurant] Adding item to cart:",t,s);let a=_.find(e=>e.name.toLowerCase()===t.toLowerCase());if(a){for(let e=0;e<(s||1);e++)if("choices"in a){let e=a.choices[0];k.addComboItem(a,e)}else k.addMenuItem(a);I(!0),setTimeout(()=>I(!1),3e3)}}}}),c.on("error",e=>{console.error("[Restaurant] Display service error:",e)}),t(!0),K(),console.log("[Restaurant] Session started successfully")}catch(e){console.error("[Restaurant] Failed:",e),m(e.message),l("idle"),t(!1)}},Y=async()=>{let e=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),t=new AudioContext({sampleRate:16e3});P.current=t,await t.audioWorklet.addModule("/audio-processor.js");let a=t.createMediaStreamSource(e),n=new AudioWorkletNode(t,"audio-stream-processor");n.port.onmessage=e=>{let{type:t,data:a,rms:n,duration:i}=e.data;if("speech-start"===t)"speaking"===s&&(console.log("[Audio] INTERRUPTION - User spoke while AI was speaking"),E.current&&(E.current.close().catch(()=>{}),E.current=null),X.current&&(cancelAnimationFrame(X.current),X.current=null),H.current=0,Q.current=!1,M.current&&M.current.interrupt()),L.current=performance.now(),l("listening"),Z(),console.log("[Audio] Speech detected (RMS: ".concat(n.toFixed(4),")"));else if("speech-end"===t)l("thinking"),console.log("[Audio] Speech ended after ".concat(i.toFixed(0),"ms")),W(Array(32).fill(0));else if("audio-data"===t){var r;if(!(null===(r=M.current)||void 0===r?void 0:r.isActive()))return;M.current.sendAudio(a)}},a.connect(n),n.connect(t.destination),l("listening"),console.log("[Restaurant] AudioWorklet streaming started")},G=()=>{if(!z.current)return;let e=z.current,t=e.frequencyBinCount,s=new Uint8Array(t),a=()=>{e.getByteFrequencyData(s);let n=Math.floor(t/32),i=[];for(let e=0;e<32;e++){let t=e*n,a=t+n,r=0;for(let e=t;e<a;e++)r+=s[e];let l=Math.min(r/n/255*3,1);i.push(l)}W(i),X.current=requestAnimationFrame(a)};a()},$=async e=>{try{E.current||(E.current=new AudioContext({sampleRate:24e3}),H.current=E.current.currentTime,z.current=E.current.createAnalyser(),z.current.fftSize=256,z.current.connect(E.current.destination));let t=E.current,s=new Int16Array(e),a=new Float32Array(s.length);for(let e=0;e<s.length;e++)a[e]=s[e]/(s[e]<0?32768:32767);let n=t.createBuffer(1,a.length,24e3);n.getChannelData(0).set(a);let i=t.createBufferSource();i.buffer=n,z.current?i.connect(z.current):i.connect(t.destination);let r=t.currentTime,c=Math.max(r,H.current);i.start(c);let o=n.duration;H.current=c+o,Q.current||(Q.current=!0,l("speaking"),G());let d=(c+o-t.currentTime)*1e3+200;setTimeout(()=>{t.currentTime>=H.current-.05&&(Q.current=!1,l("listening"),X.current&&(cancelAnimationFrame(X.current),X.current=null),K())},Math.max(d,0))}catch(e){console.error("[Restaurant] Audio playback error:",e)}},ee=async()=>{X.current&&(cancelAnimationFrame(X.current),X.current=null),Z(),M.current&&(M.current.disconnect(),M.current=null),x&&(x.disconnect(),h(null)),P.current&&(await P.current.close(),P.current=null),E.current&&(await E.current.close(),E.current=null),z.current=null,H.current=0,Q.current=!1,t(!1),l("idle"),W(Array(32).fill(0)),f([]),b(null)};return u?(0,a.jsx)("div",{className:"h-screen flex items-center justify-center bg-gradient-to-b from-[#f8f9fa] to-[#0a0a0a]",children:(0,a.jsxs)("div",{className:"max-w-md w-full mx-4 p-6 bg-red-500/10 border border-red-500/30 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2 text-red-400",children:"Error"}),(0,a.jsx)("p",{className:"text-sm text-red-300 mb-4",children:u}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Retry"})]})}):(0,a.jsx)("div",{className:"h-screen flex flex-col neu-bg",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"neu-header transition-transform duration-300 ".concat(j?"translate-y-0":"-translate-y-full"),children:(0,a.jsxs)("div",{className:"header-content",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 md:w-10 md:h-10 neu-card rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg md:text-xl",children:"\uD83C\uDF7D️"})}),(0,a.jsx)("h1",{className:"text-sm md:text-base font-bold neu-text",children:"CFC"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,a.jsxs)("div",{className:"neu-concave px-2 py-1 md:px-4 md:py-2 rounded-full flex items-center gap-1 md:gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("listening"===s?"bg-blue-500 animate-pulse":"thinking"===s?"bg-yellow-500 animate-pulse":"speaking"===s?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,a.jsx)("span",{className:"text-xs font-medium neu-text capitalize hidden md:inline",children:s})]}),(0,a.jsxs)("button",{onClick:ee,className:"neu-button text-xs px-2 py-1 md:px-4 md:py-2 rounded-lg font-medium text-red-500",children:[(0,a.jsx)("span",{className:"hidden md:inline",children:"End Session"}),(0,a.jsx)("span",{className:"md:hidden",children:"End"})]})]})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6 pb-32",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)(O,{}),p&&("dish_card"===p.type||"menu_item"===p.type||"combo_item"===p.type)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-6 animate-fade-in",onClick:()=>b(null),children:(0,a.jsx)("div",{className:"max-w-md w-full animate-scale-in",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(o,{visualData:p,onAction:(e,t)=>{console.log("[Restaurant] Display action:",e,t),x?x.sendAction(e,t):console.error("[Restaurant] Display service not available")}})})})]})}),(0,a.jsx)("div",{className:"neu-voice-mic ".concat("listening"===s?"animate-pulse":""),children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 100 100",style:{willChange:"transform"},children:R.slice(0,16).map((e,t)=>{let n=t/16*Math.PI*2-Math.PI/2,i=25+(5+15*e),r=50+25*Math.cos(n),l=50+25*Math.sin(n),c=50+Math.cos(n)*i,o=50+Math.sin(n)*i,d="thinking"===s?"rgba(255, 149, 0, ".concat(.4+.6*e,")"):"speaking"===s?"rgba(34, 197, 94, ".concat(.4+.6*e,")"):"rgba(59, 130, 246, ".concat(.4+.6*e,")");return(0,a.jsx)("line",{x1:r,y1:l,x2:c,y2:o,stroke:d,strokeWidth:"2.5",strokeLinecap:"round",style:{filter:"drop-shadow(0 0 ".concat(2+4*e,"px ").concat(d,")"),transition:"all 75ms ease-out"}},t)})})})}),(0,a.jsx)(g,{currentStep:N,totalSteps:3,steps:["Browse","Cart","Pay"]}),(0,a.jsx)(A,{onClick:()=>I(!0)}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-6 animate-fade-in",onClick:()=>I(!1),children:(0,a.jsx)("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-scale-in",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(S,{})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"neu-header",children:(0,a.jsxs)("div",{className:"header-content",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 md:w-10 md:h-10 neu-card rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg md:text-xl",children:"\uD83C\uDF7D️"})}),(0,a.jsx)("h1",{className:"text-sm md:text-base font-bold neu-text",children:"CFC"})]}),(0,a.jsx)("div",{})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto pt-16 md:pt-20",children:(0,a.jsx)(T,{onStartConversation:J})})]})})})}},function(e){e.O(0,[53,954,115,364,744],function(){return e(e.s=2295)}),_N_E=e.O()}]);