(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{314:function(e,t,s){Promise.resolve().then(s.bind(s,3745))},3745:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eI}});var a=s(7821),r=s(8078);class i{async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",t=arguments.length>1?arguments[1]:void 0;return new Promise((s,a)=>{try{console.log("[VertexAILive] Connecting to:",this.wsUrl),this.ws=new WebSocket(this.wsUrl),this.ws.onopen=()=>{console.log("[VertexAILive] WebSocket connected"),this.isConnected=!0,this.sendMessage({type:"start_session",config:{language:e,userId:t,systemInstruction:null}})},this.ws.onmessage=e=>{if(e.data instanceof ArrayBuffer||e.data instanceof Blob){let t=e.data instanceof ArrayBuffer?e.data.byteLength:e.data.size;console.log("[VertexAILive] Received audio:",t,"bytes"),e.data instanceof Blob?e.data.arrayBuffer().then(e=>{this.audioCallback&&this.audioCallback(e)}):this.audioCallback&&this.audioCallback(e.data);return}try{let t=JSON.parse(e.data);console.log("[VertexAILive] Received message:",t.type),"session_started"===t.type&&(this.sessionId=t.sessionId,this.sessionReady=!0,console.log("[VertexAILive] Session started and ready:",this.sessionId),s()),"session_ready"!==t.type||(console.log("[VertexAILive] Session ready confirmation"),this.sessionReady=!0,this.sessionId||s()),"error"===t.type&&(console.error("[VertexAILive] Error from server:",t.error),this.errorCallback&&this.errorCallback(t.error)),this.messageCallback&&this.messageCallback(t)}catch(t){console.warn("[VertexAILive] Non-JSON message:",e.data)}},this.ws.onerror=e=>{console.error("[VertexAILive] WebSocket error:",e),this.errorCallback&&this.errorCallback("WebSocket connection error"),a(Error("WebSocket connection failed"))},this.ws.onclose=e=>{console.log("[VertexAILive] WebSocket closed:",e.code,e.reason),this.isConnected=!1,this.sessionReady=!1,this.sessionId=null},setTimeout(()=>{this.sessionId||a(Error("Session start timeout"))},1e4)}catch(e){console.error("[VertexAILive] Connection error:",e),a(e)}})}sendAudio(e){if(!this.isConnected||!this.ws){console.warn("[VertexAILive] Cannot send audio - not connected");return}this.ws.readyState===WebSocket.OPEN?(this.ws.send(e),console.log("[VertexAILive] Sent audio:",e.byteLength,"bytes")):console.warn("[VertexAILive] WebSocket not open, readyState:",this.ws.readyState)}sendMessage(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&(this.ws.send(JSON.stringify(e)),console.log("[VertexAILive] Sent message:",e.type))}sendTurnComplete(){this.sendMessage({type:"turn_complete"})}interrupt(){console.log("[VertexAILive] Sending interruption signal"),this.sendMessage({type:"interrupt"})}onAudio(e){this.audioCallback=e}onMessage(e){this.messageCallback=e}onError(e){this.errorCallback=e}disconnect(){this.ws&&(this.sendMessage({type:"end_session"}),setTimeout(()=>{this.ws&&(this.ws.close(),this.ws=null)},500)),this.isConnected=!1,this.sessionReady=!1,this.sessionId=null}isActive(){return this.isConnected&&this.sessionReady&&null!==this.ws&&this.ws.readyState===WebSocket.OPEN}getSessionId(){return this.sessionId}constructor(e){if(this.ws=null,this.sessionId=null,this.isConnected=!1,this.sessionReady=!1,this.audioCallback=null,this.messageCallback=null,this.errorCallback=null,e)this.wsUrl=e;else{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;this.wsUrl="".concat(e,"//").concat(t,"/api/vertex-ai-live")}}}class n{connect(e){return new Promise((t,s)=>{let a=this.workerUrl.replace("https://","wss://").replace("http://","ws://");this.ws=new WebSocket("".concat(a,"/session/").concat(e,"/display")),this.ws.onopen=()=>{console.log("Display WebSocket connected"),this.reconnectAttempts=0,t()},this.ws.onmessage=e=>{try{let t=JSON.parse(e.data);this.handleMessage(t)}catch(e){console.error("Error parsing WebSocket message:",e)}},this.ws.onerror=e=>{console.error("WebSocket error:",e),s(e)},this.ws.onclose=()=>{console.log("WebSocket closed, attempting reconnect..."),this.attemptReconnect(e)}})}handleMessage(e){"initial_state"===e.type?this.emit("initial_state",e.state):"update"===e.type?this.emit("update",e.update):e.type}attemptReconnect(e){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnect attempts reached"),this.emit("error",Error("Failed to reconnect"));return}this.reconnectAttempts++,setTimeout(()=>{console.log("Reconnect attempt ".concat(this.reconnectAttempts,"...")),this.connect(e).catch(e=>{console.error("Reconnect failed:",e)})},this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1))}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){let s=this.listeners.get(e);s&&s.delete(t)}emit(e,t){let s=this.listeners.get(e);s&&s.forEach(e=>e(t))}sendPing(){var e;(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"ping"}))}sendAction(e,t){var s;if((null===(s=this.ws)||void 0===s?void 0:s.readyState)===WebSocket.OPEN){let s={type:"user_action",action:e,data:t,timestamp:Date.now()};this.ws.send(JSON.stringify(s)),console.log("[DisplayWebSocket] Sent action:",e,t)}else console.error("[DisplayWebSocket] Cannot send action - WebSocket not connected")}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}constructor(e){this.workerUrl=e,this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.listeners=new Map}}var l=s(4649);class o{get total(){return this.items.reduce((e,t)=>e+t.itemTotal,0)}get participantCount(){return this.participants.length}get onlineCount(){return this.participants.filter(e=>e.isOnline).length}get isOwner(){if(!this.currentUserId)return!1;let e=this.participants.find(e=>e.id===this.currentUserId);return(null==e?void 0:e.role)==="owner"}get myShare(){if(!this.currentUserId)return 0;let e=this.splitAmounts.find(e=>e.participantId===this.currentUserId);return(null==e?void 0:e.amount)||0}get itemCount(){return this.items.reduce((e,t)=>e+t.quantity,0)}setRoomData(e){this.roomId=e.roomId,this.circleId=e.circleId||null,this.circleName=e.circleName||"Group Order",this.currentUserId=e.currentUserId,this.status="active"}setConnectionStatus(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isConnected=e,this.isReconnecting=t}addParticipant(e){this.participants.find(t=>t.id===e.id)||(this.participants.push(e),this.calculateSplits())}removeParticipant(e){this.participants=this.participants.filter(t=>t.id!==e),this.calculateSplits()}updateParticipantStatus(e,t){let s=this.participants.find(t=>t.id===e);s&&(s.isOnline=t)}setParticipants(e){this.participants=e,this.calculateSplits()}addItem(e){this.items.push(e),this.lastItemAddedBy=e.addedBy,this.calculateSplits(),setTimeout(()=>{this.lastItemAddedBy===e.addedBy&&(this.lastItemAddedBy=null)},500)}removeItem(e){this.items=this.items.filter(t=>t.id!==e),this.calculateSplits()}updateQuantity(e,t){let s=this.items.find(t=>t.id===e);s&&(s.quantity=t,s.itemTotal=s.price*t,this.calculateSplits())}setItems(e){this.items=e,this.calculateSplits()}setSplitType(e){this.splitType=e,this.calculateSplits()}calculateSplits(){if(0===this.participants.length){this.splitAmounts=[];return}switch(this.splitType){case"equal":this.calculateEqualSplit();break;case"itemized":this.calculateItemizedSplit();break;case"custom":0===this.splitAmounts.length&&this.initializeCustomSplit()}}calculateEqualSplit(){let e=this.total/this.participants.length;this.splitAmounts=this.participants.map(t=>({participantId:t.id,participantName:t.name,amount:Math.round(100*e)/100}))}calculateItemizedSplit(){let e=new Map;this.participants.forEach(t=>{e.set(t.id,{amount:0,items:[]})}),this.items.forEach(t=>{let s=e.get(t.addedBy);s&&(s.amount+=t.itemTotal,s.items.push(t.id))}),this.splitAmounts=this.participants.map(t=>{var s,a;return{participantId:t.id,participantName:t.name,amount:(null===(s=e.get(t.id))||void 0===s?void 0:s.amount)||0,items:(null===(a=e.get(t.id))||void 0===a?void 0:a.items)||[]}})}initializeCustomSplit(){let e=this.total/this.participants.length;this.splitAmounts=this.participants.map(t=>({participantId:t.id,participantName:t.name,amount:Math.round(100*e)/100}))}updateCustomSplit(e,t){let s=this.splitAmounts.find(t=>t.participantId===e);s&&(s.amount=t)}get customSplitValid(){return"custom"!==this.splitType||.01>Math.abs(this.splitAmounts.reduce((e,t)=>e+t.amount,0)-this.total)}finalize(){this.status="finalized"}clear(){this.roomId=null,this.circleId=null,this.circleName=null,this.status="active",this.participants=[],this.currentUserId=null,this.items=[],this.splitType="equal",this.splitAmounts=[],this.isConnected=!1,this.isReconnecting=!1,this.lastItemAddedBy=null}syncState(e){this.roomId=e.sessionId,this.circleId=e.circleId,this.status=e.status,this.participants=e.participants.map(e=>({id:e.customerId||e.id,name:e.name,phone:e.phone,isOnline:!0,role:e.role,joinedAt:e.joinedAt||Date.now()})),this.items=e.items.map(e=>({id:e.id,dishName:e.dishName,dishType:e.dishType,quantity:e.quantity,price:e.price,itemTotal:e.itemTotal,customization:e.customization,addedBy:e.addedBy,addedByName:e.addedByName,addedAt:e.addedAt||Date.now()})),e.splitType&&(this.splitType=e.splitType),this.calculateSplits()}constructor(){this.roomId=null,this.circleId=null,this.circleName=null,this.status="active",this.participants=[],this.currentUserId=null,this.items=[],this.splitType="equal",this.splitAmounts=[],this.isConnected=!1,this.isReconnecting=!1,this.lastItemAddedBy=null,(0,l.ky)(this)}}let c=new o;class d{connect(e,t,s,a,r,i){return new Promise((n,l)=>{try{this.roomUrl=e,this.customerId=t,this.customerName=s,console.log("[PartyKit] Connecting to:",e),this.ws=new WebSocket(e),this.ws.onopen=()=>{console.log("[PartyKit] Connected"),c.setConnectionStatus(!0,!1),this.reconnectAttempts=0,this.sendJoin(a,r,i),n()},this.ws.onmessage=e=>{try{let t=JSON.parse(e.data);this.handleMessage(t)}catch(e){console.error("[PartyKit] Failed to parse message:",e)}},this.ws.onerror=e=>{var t;console.error("[PartyKit] WebSocket error:",e),c.setConnectionStatus(!1,!1),null===(t=this.onErrorCallback)||void 0===t||t.call(this,e),l(e)},this.ws.onclose=e=>{console.log("[PartyKit] Disconnected",e.code,e.reason),c.setConnectionStatus(!1,!1),1e3!==e.code&&this.reconnectAttempts<this.maxReconnectAttempts&&this.attemptReconnect()}}catch(e){console.error("[PartyKit] Connection failed:",e),l(e)}})}attemptReconnect(){this.reconnectAttempts++;let e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log("[PartyKit] Reconnecting in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),c.setConnectionStatus(!1,!0),setTimeout(()=>{this.roomUrl&&this.customerId&&this.customerName&&this.connect(this.roomUrl,this.customerId,this.customerName).catch(e=>{console.error("[PartyKit] Reconnection failed:",e)})},e)}handleMessage(e){var t,s,a,r,i,n,l,o,d,m;switch(console.log("[PartyKit] Received:",e.type),e.type){case"sync":c.syncState(e.data),null===(t=this.onSyncCallback)||void 0===t||t.call(this,e.data);break;case"participant_joined":let u={id:e.participantId,name:e.participantName,phone:(null===(s=e.data)||void 0===s?void 0:s.phone)||"",isOnline:!0,role:(null===(a=e.data)||void 0===a?void 0:a.role)||"member",joinedAt:e.timestamp};c.addParticipant(u),null===(r=this.onParticipantJoinedCallback)||void 0===r||r.call(this,u);break;case"participant_left":c.removeParticipant(e.participantId),null===(i=this.onParticipantLeftCallback)||void 0===i||i.call(this,{id:e.participantId,name:e.participantName});break;case"item_added":let x=e.data.item;c.addItem(x),null===(n=this.onItemAddedCallback)||void 0===n||n.call(this,x,{id:e.participantId,name:e.participantName});break;case"item_removed":let h=e.data.itemId;c.removeItem(h),null===(l=this.onItemRemovedCallback)||void 0===l||l.call(this,h,{id:e.participantId,name:e.participantName});break;case"quantity_updated":let{itemId:p,quantity:g}=e.data;c.updateQuantity(p,g),null===(o=this.onQuantityUpdatedCallback)||void 0===o||o.call(this,p,g,{id:e.participantId,name:e.participantName});break;case"split_updated":c.setSplitType(e.data.splitType);break;case"order_finalized":c.finalize(),null===(d=this.onOrderFinalizedCallback)||void 0===d||d.call(this,e.data);break;case"error":console.error("[PartyKit] Server error:",e.data),null===(m=this.onErrorCallback)||void 0===m||m.call(this,e.data);break;default:console.warn("[PartyKit] Unknown message type:",e.type)}}sendJoin(e,t,s){this.send({type:"join",participantId:this.customerId,participantName:this.customerName,timestamp:Date.now(),data:{circleId:e,tenantId:t,phone:s}})}sendAddItem(e){this.send({type:"add_item",participantId:this.customerId,participantName:this.customerName,timestamp:Date.now(),data:e})}sendRemoveItem(e){this.send({type:"remove_item",participantId:this.customerId,participantName:this.customerName,timestamp:Date.now(),data:{itemId:e}})}sendUpdateQuantity(e,t){this.send({type:"update_quantity",participantId:this.customerId,participantName:this.customerName,timestamp:Date.now(),data:{itemId:e,quantity:t}})}sendUpdateSplit(e){this.send({type:"update_split",participantId:this.customerId,participantName:this.customerName,timestamp:Date.now(),data:{splitType:e}})}sendFinalize(){this.send({type:"finalize",participantId:this.customerId,participantName:this.customerName,timestamp:Date.now()})}sendLeave(){this.send({type:"leave",participantId:this.customerId,participantName:this.customerName,timestamp:Date.now()})}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify(e)):console.warn("[PartyKit] Cannot send message, not connected")}disconnect(){this.ws&&(this.sendLeave(),this.ws.close(1e3,"User disconnected"),this.ws=null),c.clear()}isConnected(){var e;return(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}onSync(e){this.onSyncCallback=e}onParticipantJoined(e){this.onParticipantJoinedCallback=e}onParticipantLeft(e){this.onParticipantLeftCallback=e}onItemAdded(e){this.onItemAddedCallback=e}onItemRemoved(e){this.onItemRemovedCallback=e}onQuantityUpdated(e){this.onQuantityUpdatedCallback=e}onOrderFinalized(e){this.onOrderFinalizedCallback=e}onError(e){this.onErrorCallback=e}constructor(){this.ws=null,this.roomUrl=null,this.customerId=null,this.customerName=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3}}function m(e){let{data:t,onAction:s}=e;return(0,a.jsxs)("div",{className:"neu-card overflow-hidden hover-lift animate-fade-in",children:[t.imageUrl&&(0,a.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200",children:(0,a.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold neu-text mb-1",children:t.name}),t.category&&(0,a.jsx)("span",{className:"text-xs neu-text-secondary uppercase tracking-wide",children:t.category})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold neu-text-accent",children:["₹",t.price]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t.rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-warning",children:"⭐"}),(0,a.jsx)("span",{className:"font-semibold neu-text",children:t.rating.toFixed(1)})]}),t.type&&(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("veg"===t.type?"bg-veg-light text-veg-dark border border-veg":"bg-non-veg-light text-non-veg-dark border border-non-veg"),children:"veg"===t.type?"\uD83C\uDF31 Veg":"\uD83C\uDF56 Non-Veg"}),t.spiceLevel&&t.spiceLevel>0&&(0,a.jsx)("span",{className:"flex items-center gap-1",children:"\uD83C\uDF36️".repeat(Math.min(t.spiceLevel,5))})]}),t.description&&(0,a.jsx)("p",{className:"text-sm neu-text-secondary leading-relaxed",children:t.description}),t.dietary&&t.dietary.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.dietary.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs neu-concave neu-text-secondary",children:e},t))}),(0,a.jsx)("button",{onClick:()=>{null==s||s("add_to_cart_verbal",{dishName:t.name,quantity:1})},disabled:!1===t.available,className:"w-full neu-button-accent rounded-xl px-6 py-3 text-base font-semibold transition-all ".concat(!1===t.available?"opacity-50 cursor-not-allowed":""),children:!1===t.available?"Not Available":"Add to Order • ₹".concat(t.price)})]})]})}function u(e){var t;let{data:s,onAction:i}=e,[n,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)((null===(t=s.choices)||void 0===t?void 0:t[0])||"");return(0,a.jsxs)("div",{className:"neu-card overflow-hidden hover-lift animate-fade-in",children:[s.imageUrl&&(0,a.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200",children:[(0,a.jsx)("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}),s.tag&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-error text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,a.jsx)("span",{children:"\uD83D\uDD25"}),(0,a.jsx)("span",{children:s.tag})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold neu-text mb-1",children:s.name}),(0,a.jsx)("span",{className:"text-xs neu-text-secondary uppercase tracking-wide",children:"Combo Meal"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold neu-text-accent",children:["₹",s.price]})]}),s.description&&(0,a.jsx)("p",{className:"text-sm neu-text-secondary leading-relaxed",children:s.description}),o&&(0,a.jsxs)("div",{className:"neu-concave p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs neu-text-secondary mb-1",children:"Selected:"}),(0,a.jsx)("p",{className:"text-sm font-semibold neu-text",children:o})]}),s.choices&&s.choices.length>0&&(0,a.jsx)("button",{onClick:()=>l(!n),className:"text-sm font-semibold text-info hover:text-info/80",children:n?"Hide Options":"Customize"}),n&&s.choices&&(0,a.jsxs)("div",{className:"neu-concave rounded-lg overflow-hidden animate-fade-in",children:[(0,a.jsx)("p",{className:"text-xs font-semibold neu-text p-3 border-b border-gray-200",children:"Choose your option:"}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:s.choices.map((e,t)=>(0,a.jsxs)("label",{className:"flex items-center p-3 cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"combo-choice",value:e,checked:o===e,onChange:()=>c(e),className:"mr-3"}),(0,a.jsx)("span",{className:"text-sm neu-text",children:e})]},t))})]}),(0,a.jsx)("button",{onClick:()=>{null==i||i("add_to_cart_verbal",{dishName:s.name,quantity:1,customizations:o})},disabled:!1===s.available,className:"w-full neu-button-accent rounded-xl px-6 py-3 text-base font-semibold transition-all ".concat(!1===s.available?"opacity-50 cursor-not-allowed":""),children:!1===s.available?"Not Available":"Add to Order • ₹".concat(s.price)})]})]})}var x=s(2133),h=s(5118),p=s(2949);function g(e){let{data:t}=e,[s,i]=(0,r.useState)(!1),[n,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=document.createElement("script");return e.src="https://checkout.razorpay.com/v1/checkout.js",e.async=!0,e.onload=()=>c(!0),e.onerror=()=>l("Failed to load payment gateway"),document.body.appendChild(e),()=>{document.body.removeChild(e)}},[]),(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8 bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-orange-100 rounded-full animate-pulse opacity-75"}),(0,a.jsx)("div",{className:"relative bg-gradient-to-br from-orange-500 to-orange-600 w-20 h-20 rounded-full flex items-center justify-center mx-auto shadow-lg",children:(0,a.jsx)(x.Z,{className:"w-10 h-10 text-white"})})]}),(0,a.jsx)("h2",{className:"text-2xl font-light neu-text mt-6 mb-2",children:"Complete Payment"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Order ID: ",t.orderId]})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-gray-100/50 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Amount to Pay"}),(0,a.jsxs)("p",{className:"text-4xl font-bold text-orange-600",children:["₹",t.amount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Payment Details"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Name:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:t.customer.name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Phone:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:t.customer.phone})]})]})]}),n&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:n})}),(0,a.jsx)("button",{onClick:()=>{if(!o||!window.Razorpay){l("Payment gateway not loaded. Please refresh and try again.");return}i(!0),l(null);let e={key:p.env.NEXT_PUBLIC_RAZORPAY_KEY_ID||"",amount:Math.round(100*t.amount),currency:t.currency,name:"The Coorg Food Company",description:"Order ".concat(t.orderId),order_id:t.razorpayOrderId,prefill:{name:t.customer.name,contact:t.customer.phone,email:t.customer.email||""},theme:{color:"#F97316"},handler:async function(e){try{let s=await fetch("".concat("https://stonepot-restaurant-334610188311.us-central1.run.app","/api/restaurant/payment/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:t.orderId,razorpayOrderId:e.razorpay_order_id,razorpayPaymentId:e.razorpay_payment_id,razorpaySignature:e.razorpay_signature})});(await s.json()).success?console.log("Payment verified successfully"):l("Payment verification failed. Please contact support.")}catch(e){console.error("Payment verification error:",e),l("Payment verification failed. Please contact support.")}finally{i(!1)}},modal:{ondismiss:function(){i(!1),l("Payment cancelled")}}};new window.Razorpay(e).open()},disabled:s||!o,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Pay ₹",t.amount.toFixed(2)]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 animate-spin"}),"Loading Payment Gateway..."]})}),(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Secure payment powered by Razorpay"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-400",children:[(0,a.jsx)("span",{children:"UPI"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:"Cards"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:"Wallets"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:"Net Banking"})]})]})]})})}var y=s(7729),b=s(1996),f=s(5758);function j(e){let{data:t}=e;return(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8 bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"relative inline-block",children:(0,a.jsx)("div",{className:"relative bg-gradient-to-br from-blue-500 to-blue-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto shadow-lg",children:(0,a.jsx)(y.Z,{className:"w-8 h-8 text-white"})})}),(0,a.jsx)("h2",{className:"text-2xl font-light neu-text mt-4 mb-2",children:"Order Summary"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Order ID: ",t.orderId]})]}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-4 text-white shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium capitalize",children:t.orderType})]}),t.estimatedTime&&(0,a.jsx)("span",{className:"text-sm opacity-90",children:t.estimatedTime})]})}),t.deliveryAddress&&(0,a.jsx)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 border border-gray-100/50",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:"Delivery Address"}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:t.deliveryAddress})]})]})}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 mb-3",children:["Items (",t.items.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:t.items.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-700",children:[e.quantity,"x ",e.dishName]}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:["₹",(e.price*e.quantity).toFixed(2)]})]},t))})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Price Details"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["₹",t.subtotal.toFixed(2)]})]}),t.deliveryFee>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Delivery Fee"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["₹",t.deliveryFee.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"GST (5%)"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["₹",t.tax.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"pt-2 border-t border-gray-200 flex justify-between font-semibold",children:[(0,a.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,a.jsxs)("span",{className:"text-orange-600",children:["₹",t.total.toFixed(2)]})]})]})]}),(0,a.jsx)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 border border-gray-100/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-orange-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Payment Method"}),(0,a.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:t.paymentMethod})]})]})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"online"===t.paymentMethod?"Preparing payment...":"Processing your order..."})})]})})}var v=s(1366);function N(e){let{data:t}=e;return(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8 bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-green-100 rounded-full animate-ping opacity-75"}),(0,a.jsx)("div",{className:"relative bg-gradient-to-br from-green-500 to-green-600 w-24 h-24 rounded-full flex items-center justify-center mx-auto shadow-lg",children:(0,a.jsx)(v.Z,{className:"w-12 h-12 text-white",strokeWidth:2.5})})]}),(0,a.jsx)("h2",{className:"text-3xl font-light neu-text mt-6 mb-2",children:"Order Confirmed!"}),(0,a.jsx)("p",{className:"text-gray-600",children:t.message||"Thank you for your order"})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-gray-100/50 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Order ID"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900 font-mono",children:t.orderId})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)(b.Z,{className:"w-6 h-6"}),(0,a.jsxs)("h3",{className:"text-lg font-semibold capitalize",children:[t.orderType," Order"]})]}),t.estimatedTime&&(0,a.jsxs)("p",{className:"text-sm opacity-90",children:["Estimated Time: ",t.estimatedTime]}),!t.estimatedTime&&(0,a.jsx)("p",{className:"text-sm opacity-90",children:"We'll prepare your order shortly"})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Payment"]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 capitalize",children:"online"===t.paymentMethod?"Paid Online":"Cash on ".concat(t.orderType)}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["₹",t.total.toFixed(2)]})]}),"online"===t.paymentMethod&&(0,a.jsx)("div",{className:"mt-2 inline-block bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-medium",children:"✓ Payment Successful"})]}),(0,a.jsxs)("div",{className:"text-center space-y-2 py-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"We'll notify you when your order is ready"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Keep this page for order reference"})]})]})})}var w=s(750),k=s(9086);function C(e){let{data:t}=e;return(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8 bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"relative inline-block",children:(0,a.jsx)("div",{className:"relative ".concat(t.verified&&t.deliverable?"bg-gradient-to-br from-green-500 to-green-600":t.verified?"bg-gradient-to-br from-orange-500 to-orange-600":"bg-gradient-to-br from-red-500 to-red-600"," w-20 h-20 rounded-full flex items-center justify-center mx-auto shadow-lg"),children:t.verified&&t.deliverable?(0,a.jsx)(w.Z,{className:"w-10 h-10 text-white"}):(0,a.jsx)(k.Z,{className:"w-10 h-10 text-white"})})}),(0,a.jsx)("h2",{className:"text-2xl font-light neu-text mt-6 mb-2",children:t.verified&&t.deliverable?"Address Verified":t.verified?"Address Found":"Verification Failed"})]}),(0,a.jsx)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:"Address"}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:t.address})]})]})}),t.verified&&t.coordinates&&(0,a.jsx)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Coordinates"}),(0,a.jsxs)("span",{className:"text-gray-900 font-mono text-xs",children:[t.coordinates.lat.toFixed(6),", ",t.coordinates.lng.toFixed(6)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Delivery Available"}),(0,a.jsx)("span",{className:"font-medium ".concat(t.deliverable?"text-green-600":"text-red-600"),children:t.deliverable?"Yes":"No"})]})]})}),t.message&&(0,a.jsx)("div",{className:"rounded-xl p-4 ".concat(t.verified&&t.deliverable?"bg-green-50 border border-green-200":"bg-orange-50 border border-orange-200"),children:(0,a.jsx)("p",{className:"text-sm ".concat(t.verified&&t.deliverable?"text-green-700":"text-orange-700"),children:t.message})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.verified&&t.deliverable?"You can proceed with your order":t.verified?"Please provide a different address":"Please try again or enter manually"})})]})})}function S(e){let{visualData:t,onAction:s}=e;if(!t)return null;let{type:r,data:i}=t;switch(r){case"dish_card":if((null==i?void 0:i.choices)||(null==i?void 0:i.category)==="combos")return(0,a.jsx)(u,{data:i,onAction:s});return(0,a.jsx)(m,{data:i,onAction:s});case"menu_item":return(0,a.jsx)(m,{data:i,onAction:s});case"combo_item":return(0,a.jsx)(u,{data:i,onAction:s});case"menu_section":return(0,a.jsx)(P,{data:i});case"order_summary":case"cart_updated":return(0,a.jsx)(A,{data:i,onAction:s});case"cart_item_added":return(0,a.jsx)(I,{data:i});case"confirmation":return(0,a.jsx)(T,{data:i});case"address_verification":return(0,a.jsx)(C,{data:i});case"checkout_summary":return(0,a.jsx)(j,{data:i});case"payment_pending":return(0,a.jsx)(g,{data:i});case"order_confirmed":return(0,a.jsx)(N,{data:i});case"webpage":return(0,a.jsx)(D,{url:null==i?void 0:i.url});case"snippet":return(0,a.jsx)(O,{content:null==i?void 0:i.content,title:null==i?void 0:i.title});default:return(0,a.jsxs)("div",{className:"p-4 bg-gray-100 rounded",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Unknown display type: ",r]}),(0,a.jsx)("pre",{className:"mt-2 text-xs overflow-auto",children:JSON.stringify(t,null,2)})]})}}function I(e){let{data:t}=e;return(0,a.jsx)("div",{className:"neu-card animate-fade-in border-l-4 border-success",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4",children:[(0,a.jsx)("div",{className:"text-2xl",children:"✅"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-lg font-bold neu-text-accent mb-1",children:"Added to Cart"}),(0,a.jsxs)("p",{className:"text-sm neu-text",children:[t.item.quantity,"x ",t.item.dishName," • ₹",t.item.itemTotal]}),(0,a.jsxs)("p",{className:"text-xs neu-text-secondary mt-2",children:["Cart Total: ₹",t.cart.total]})]})]})})}function A(e){let{data:t,onAction:s}=e;if(!t||!t.items||0===t.items.length)return(0,a.jsx)("div",{className:"text-center neu-text-secondary py-8",children:(0,a.jsx)("p",{className:"text-sm",children:"Your order is empty"})});let r=e=>{null==s||s("remove_from_cart",{itemId:e})},i=(e,t,a)=>{null==s||s("update_quantity",{itemId:e,action:t,newQuantity:"increment"===t?a+1:Math.max(1,a-1)})};return(0,a.jsxs)("div",{className:"neu-card overflow-hidden animate-fade-in",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-xl font-bold neu-text",children:"\uD83D\uDED2 Your Order"}),(0,a.jsxs)("p",{className:"text-sm neu-text-secondary mt-1",children:[t.items.length," item",1!==t.items.length?"s":""]})]}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:t.items.map(e=>(0,a.jsx)("div",{className:"p-4 hover-lift transition-all",children:(0,a.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-semibold neu-text",children:e.dishName}),e.customizations&&e.customizations.length>0&&(0,a.jsx)("p",{className:"text-xs neu-text-secondary mt-1",children:e.customizations.join(", ")}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsx)("button",{onClick:()=>i(e.id,"decrement",e.quantity),className:"w-8 h-8 flex items-center justify-center neu-button rounded-lg text-sm font-bold",children:"−"}),(0,a.jsx)("span",{className:"text-sm font-medium neu-text min-w-[2rem] text-center",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>i(e.id,"increment",e.quantity),className:"w-8 h-8 flex items-center justify-center neu-button rounded-lg text-sm font-bold",children:"+"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-bold neu-text",children:["₹",e.itemTotal]}),(0,a.jsx)("button",{onClick:()=>r(e.id),className:"text-xs text-error hover:text-error/80 mt-2 transition-colors font-medium",children:"Remove"})]})]})},e.id))}),(0,a.jsxs)("div",{className:"px-6 py-4 space-y-2 border-t border-gray-200 neu-concave",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"neu-text-secondary",children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-medium neu-text",children:["₹",t.subtotal]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"neu-text-secondary",children:"Tax (5%)"}),(0,a.jsxs)("span",{className:"font-medium neu-text",children:["₹",t.tax]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-300",children:[(0,a.jsx)("span",{className:"neu-text",children:"Total"}),(0,a.jsxs)("span",{className:"neu-text-accent",children:["₹",t.total]})]})]})]})}function P(e){let{data:t}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-white shadow",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"\uD83D\uDCCB Menu Section"}),(0,a.jsx)("pre",{className:"mt-2 text-xs overflow-auto",children:JSON.stringify(t,null,2)})]})}function T(e){let{data:t}=e;return(0,a.jsx)("div",{className:"neu-card rounded-xl p-6 backdrop-blur-sm border-l-4 border-success",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-4xl",children:"✅"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-success",children:"Order Confirmed!"}),(null==t?void 0:t.message)&&(0,a.jsx)("p",{className:"text-sm neu-text-secondary",children:t.message})]})})}function D(e){let{url:t}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-white shadow",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"\uD83C\uDF10 Web Page"}),(0,a.jsxs)("p",{className:"mt-2",children:["URL: ",t]}),t&&(0,a.jsx)("iframe",{src:t,className:"w-full h-96 mt-4 border rounded",sandbox:"allow-scripts allow-same-origin"})]})}function O(e){let{content:t,title:s}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-white shadow",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold",children:["\uD83D\uDCDD ",s||"Snippet"]}),(0,a.jsx)("div",{className:"mt-4 prose",children:t})]})}var R=s(7472),z=s(8149),F=s(3116),_=s(1166),U=s(5189);class E{addMenuItem(e){let t=this.items.find(t=>t.name===e.name&&t.type===e.type&&!t.customization);t?t.quantity+=1:this.items.push({name:e.name,price:e.price,quantity:1,type:e.type,imageUrl:e.imageUrl})}addComboItem(e,t){let s=this.items.find(s=>s.name===e.name&&s.customization===t);s?s.quantity+=1:this.items.push({name:e.name,price:e.price,quantity:1,type:e.type,customization:t,imageUrl:e.imageUrl})}updateQuantity(e,t,s){let a=this.items.find(s=>s.name===e&&s.type===t);a&&(a.quantity=s)}removeItem(e,t){this.items=this.items.filter(s=>!(s.name===e&&s.type===t))}get total(){return this.items.reduce((e,t)=>e+t.price*t.quantity,0)}get itemCount(){return this.items.reduce((e,t)=>e+t.quantity,0)}clearCart(){this.items=[]}constructor(){this.items=[],(0,l.ky)(this)}}let M=new E,V=(0,R.Pi)(function(e){let{onPlaceOrder:t}=e;return 0===M.items.length?(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-6xl opacity-20",children:"\uD83C\uDF7D️"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-light neu-text mb-2",children:"Your order is empty"}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary opacity-60",children:"Start ordering by voice or browse the menu"})]})]})}):(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl",children:[(0,a.jsx)("div",{className:"p-6 pb-4",children:(0,a.jsx)("div",{className:"flex items-baseline justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-light neu-text tracking-tight",children:"Your Order"}),(0,a.jsxs)("p",{className:"text-sm neu-text-secondary opacity-60 mt-1",children:[M.itemCount," ",1===M.itemCount?"item":"items"]})]})})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-6 space-y-4",children:M.items.map((e,t)=>(0,a.jsx)("div",{className:"group relative",style:{animation:"fadeInUp 0.4s ease-out ".concat(.1*t,"s both")},children:(0,a.jsx)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100/50",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[e.imageUrl&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(z.default,{src:e.imageUrl,alt:e.name,width:100,height:100,className:"rounded-xl object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsx)("h3",{className:"font-medium text-lg neu-text",children:e.name}),(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"veg"===e.type?"#dcfce7":"#fee2e2",color:"veg"===e.type?"#166534":"#991b1b"},children:"veg"===e.type?"\uD83D\uDFE2":"\uD83D\uDD34"})]}),e.customization&&(0,a.jsx)("p",{className:"text-sm neu-text-secondary opacity-60 mt-1",children:e.customization})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 bg-gray-50/80 rounded-full px-3 py-1.5",children:[(0,a.jsx)("button",{onClick:()=>{e.quantity>1?M.updateQuantity(e.name,e.type,e.quantity-1):M.removeItem(e.name,e.type)},className:"w-7 h-7 rounded-full bg-white shadow-sm hover:shadow transition-all flex items-center justify-center text-gray-600 hover:text-gray-900",children:1===e.quantity?(0,a.jsx)(F.Z,{className:"w-4 h-4"}):(0,a.jsx)(_.Z,{className:"w-3.5 h-3.5"})}),(0,a.jsx)("span",{className:"font-semibold neu-text min-w-[1.5rem] text-center",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>M.updateQuantity(e.name,e.type,e.quantity+1),className:"w-7 h-7 rounded-full bg-white shadow-sm hover:shadow transition-all flex items-center justify-center text-gray-600 hover:text-gray-900",children:(0,a.jsx)(U.Z,{className:"w-3.5 h-3.5"})})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold neu-text-accent",children:["₹",e.price*e.quantity]}),e.quantity>1&&(0,a.jsxs)("div",{className:"text-xs neu-text-secondary opacity-60",children:["₹",e.price," each"]})]})]})]})]})})},"".concat(e.name,"-").concat(e.customization||"default","-").concat(t)))}),(0,a.jsxs)("div",{className:"sticky bottom-0 p-6 bg-gradient-to-t from-white via-white/98 to-white/95 backdrop-blur-xl border-t border-gray-200/30",children:[(0,a.jsxs)("div",{className:"flex items-baseline justify-between mb-6",children:[(0,a.jsx)("span",{className:"text-lg font-light neu-text-secondary",children:"Total"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-3xl font-light neu-text tracking-tight",children:["₹",M.total]}),(0,a.jsx)("div",{className:"text-xs neu-text-secondary opacity-60 mt-1",children:"incl. taxes"})]})]}),(0,a.jsx)("button",{onClick:t,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 rounded-2xl font-medium text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] active:scale-[0.98]",children:"Place Order"})]})]})}),W=(0,R.Pi)(function(e){let{onClick:t}=e;return 0===M.itemCount?null:(0,a.jsx)("button",{onClick:t,className:"fixed bottom-8 right-6 z-40 group",style:{animation:"slideInRight 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:(0,a.jsxs)("div",{className:"relative bg-gradient-to-r from-primary-500 to-primary-600 text-white px-6 py-4 rounded-full shadow-xl hover:shadow-2xl transition-all duration-normal hover:scale-105 active:scale-95",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-primary-400/50 blur-xl opacity-60 group-hover:opacity-80 transition-opacity"}),(0,a.jsxs)("div",{className:"relative flex items-center gap-4",children:[(0,a.jsx)("div",{className:"bg-white/20 backdrop-blur-sm rounded-full w-10 h-10 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg font-bold",children:M.itemCount})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-xs font-medium opacity-90",children:"Your Order"}),(0,a.jsxs)("div",{className:"text-lg font-bold",children:["₹",M.total]})]}),(0,a.jsx)("svg",{className:"w-5 h-5 opacity-80 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-white/30 animate-ping",style:{animationDuration:"2s"}})]})})});var Z=s(7838),q=s(5141);let B=(0,R.Pi)(function(e){let{compact:t=!1}=e,{participants:s,currentUserId:r}=c;return t?(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Participants (",s.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:[s.map(e=>{let t=e.id===r,s=e.name.charAt(0).toUpperCase();return(0,a.jsxs)("div",{className:"flex flex-col items-center min-w-[60px]",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"\n                    w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold\n                    ".concat(t?"bg-gradient-to-br from-blue-500 to-blue-600 ring-2 ring-blue-300":"bg-gradient-to-br from-gray-400 to-gray-500","\n                  "),children:s}),"owner"===e.role&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center",children:(0,a.jsx)(Z.Z,{className:"w-3 h-3 text-yellow-900"})}),e.isOnline&&(0,a.jsx)("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1 text-center max-w-[60px] truncate",children:t?"You":e.name})]},e.id)}),(0,a.jsxs)("div",{className:"flex flex-col items-center min-w-[60px]",children:[(0,a.jsx)("button",{className:"w-12 h-12 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors",children:(0,a.jsx)(q.Z,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Invite"})]})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Participants"}),(0,a.jsxs)("div",{className:"space-y-3",children:[s.map(e=>{let t=e.id===r,s=e.name.charAt(0).toUpperCase();return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",style:{animation:"fadeInUp 0.3s ease-out"},children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"\n                  w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold text-sm\n                  ".concat(t?"bg-gradient-to-br from-blue-500 to-blue-600 ring-2 ring-blue-300":"bg-gradient-to-br from-gray-400 to-gray-500","\n                "),children:s}),"owner"===e.role&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center",children:(0,a.jsx)(Z.Z,{className:"w-2.5 h-2.5 text-yellow-900"})}),e.isOnline&&(0,a.jsx)("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900 truncate",children:[t?"You":e.name,t&&"owner"===e.role&&(0,a.jsx)("span",{className:"ml-1 text-xs text-gray-500",children:"(Owner)"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.isOnline?"Online":"Offline"})]})]},e.id)}),(0,a.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 p-3 rounded-lg border-2 border-dashed border-gray-300 hover:border-gray-400 hover:bg-gray-50 transition-colors text-gray-600 hover:text-gray-700",children:[(0,a.jsx)(q.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Invite"})]})]})]})});var L=s(2212);let H=(0,R.Pi)(function(){let{items:e,currentUserId:t,lastItemAddedBy:s,status:r}=c;return 0===e.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:(0,a.jsx)(L.Z,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 max-w-xs",children:"Start adding items by voice or use the menu below. Everyone in the group can add items!"})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:["Order Items (",e.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:e.map((e,i)=>{let n=e.addedBy===t,l=s===e.addedBy;return(0,a.jsxs)("div",{className:"\n                relative p-4 rounded-xl border transition-all duration-300\n                ".concat(n?"bg-blue-50/50 border-blue-200":"bg-white border-gray-200","\n                ").concat(l&&n?"animate-flash-green":l?"animate-flash-amber":"","\n              "),style:{animation:"fadeInUp 0.4s ease-out ".concat(.05*i,"s both")},children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.dishName}),(0,a.jsx)("span",{className:"\n                      text-xs px-2 py-0.5 rounded-full\n                      ".concat("veg"===e.dishType?"bg-green-100 text-green-800":"bg-red-100 text-red-800","\n                    "),children:"veg"===e.dishType?"\uD83D\uDFE2 Veg":"\uD83D\uDD34 Non-Veg"})]}),e.customization&&(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.customization}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Added by ",n?"You":e.addedByName]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["₹",e.itemTotal]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["₹",e.price," each"]})]})]}),"active"===r&&(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{disabled:!n,className:"\n                        w-8 h-8 rounded-full flex items-center justify-center transition-all\n                        ".concat(n?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-gray-50 text-gray-300 cursor-not-allowed","\n                      "),children:1===e.quantity?(0,a.jsx)(F.Z,{className:"w-4 h-4"}):(0,a.jsx)(_.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"w-8 text-center font-semibold text-gray-900",children:e.quantity}),(0,a.jsx)("button",{disabled:!n,className:"\n                        w-8 h-8 rounded-full flex items-center justify-center transition-all\n                        ".concat(n?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-gray-50 text-gray-300 cursor-not-allowed","\n                      "),children:(0,a.jsx)(U.Z,{className:"w-4 h-4"})})]}),!n&&(0,a.jsx)("span",{className:"text-xs text-gray-500 italic",children:"Only owner can edit"})]})]},e.id)})})]})});var Q=s(6573);let K=(0,R.Pi)(function(e){let{compact:t=!1}=e,{splitType:s,splitAmounts:r,total:i,customSplitValid:n}=c,l=e=>{c.setSplitType(e)},o=[{type:"equal",label:"Equal"},{type:"itemized",label:"By Items"},{type:"custom",label:"Custom"}];return t?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex gap-2 mb-4",children:o.map(e=>(0,a.jsx)("button",{onClick:()=>l(e.type),className:"\n                flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all\n                ".concat(s===e.type?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200","\n              "),children:e.label},e.type))}),(0,a.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.participantName}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-blue-600",children:["₹",e.amount]})]},e.participantId))})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Split Calculator"}),(0,a.jsx)("div",{className:"flex flex-col gap-2 mb-6",children:o.map(e=>(0,a.jsxs)("button",{onClick:()=>l(e.type),className:"\n              flex items-center justify-between px-4 py-3 rounded-xl text-sm font-medium transition-all\n              ".concat(s===e.type?"bg-blue-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200","\n            "),children:[(0,a.jsx)("span",{children:e.label}),s===e.type&&(0,a.jsx)(Q.Z,{className:"w-4 h-4"})]},e.type))}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:["equal"===s&&"Each person pays","itemized"===s&&"Based on items added","custom"===s&&"Custom split"]}),r.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-white rounded-xl border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.participantName}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-blue-600",children:["₹",e.amount]})]}),(0,a.jsx)("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:"".concat(e.amount/i*100,"%")}})}),"itemized"===s&&e.items&&e.items.length>0&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-600",children:[e.items.length," item",1!==e.items.length?"s":""]})]},e.participantId))]}),"custom"===s&&!n&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-xl",children:(0,a.jsxs)("p",{className:"text-xs text-red-800",children:["⚠️ Split amounts must equal ₹",i]})}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Order"}),(0,a.jsxs)("span",{className:"font-bold text-gray-900",children:["₹",i]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mt-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Your Share"}),(0,a.jsxs)("span",{className:"font-bold text-blue-600",children:["₹",c.myShare]})]})]})]})});var X=s(961),J=s(4713),Y=s(8134);let G=(0,R.Pi)(function(e){let{isOpen:t,onClose:s}=e,[i,n]=(0,r.useState)(!1);if(!t)return null;let l=()=>{confirm("Are you sure you want to leave this group order?")&&s()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:l}),(0,a.jsxs)("div",{className:"\n        fixed z-50\n        bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl\n        shadow-2xl\n        transition-all duration-400 ease-out\n\n        ".concat(t?"translate-x-0 translate-y-0":"","\n\n        /* Mobile: Bottom sheet */\n        md:hidden\n        bottom-0 left-0 right-0\n        h-[85vh]\n        rounded-t-3xl\n        ").concat(t?"":"translate-y-full","\n\n        /* Desktop: Right panel */\n        md:block md:top-0 md:right-0 md:bottom-0\n        md:w-[600px] md:h-full\n        md:rounded-none\n        ").concat(t?"":"md:translate-x-full md:translate-y-0","\n      "),children:[(0,a.jsxs)("div",{className:"sticky top-0 z-10 bg-white/90 backdrop-blur-md border-b border-gray-200/30 px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:(0,a.jsx)(X.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:c.circleName||"Group Order"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),c.onlineCount," online"]}),"finalized"===c.status&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Finalized"})]})]})]}),(0,a.jsx)("button",{onClick:l,className:"w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:(0,a.jsx)(F.Z,{className:"w-5 h-5 text-gray-600"})})]}),!c.isConnected&&(0,a.jsx)("div",{className:"\n              mt-3 px-4 py-2 rounded-lg text-sm\n              ".concat(c.isReconnecting?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800","\n            "),children:c.isReconnecting?"Reconnecting...":"Connection lost. Trying to reconnect..."})]}),(0,a.jsxs)("div",{className:"h-[calc(100%-160px)] md:h-[calc(100%-200px)] overflow-hidden",children:[(0,a.jsxs)("div",{className:"md:hidden h-full flex flex-col",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200/30",children:(0,a.jsx)(B,{compact:!0})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:(0,a.jsx)(H,{})})]}),(0,a.jsxs)("div",{className:"hidden md:grid md:grid-cols-[220px_1fr_280px] h-full",children:[(0,a.jsx)("div",{className:"border-r border-gray-200/30 px-4 py-6 overflow-y-auto",children:(0,a.jsx)(B,{})}),(0,a.jsx)("div",{className:"px-6 py-6 overflow-y-auto",children:(0,a.jsx)(H,{})}),(0,a.jsx)("div",{className:"border-l border-gray-200/30 px-4 py-6 overflow-y-auto",children:(0,a.jsx)(K,{})})]})]}),(0,a.jsxs)("div",{className:"sticky bottom-0 bg-white/95 backdrop-blur-md border-t border-gray-200/30 px-6 py-4",children:[(0,a.jsxs)("button",{onClick:()=>n(!i),className:"md:hidden w-full flex items-center justify-between mb-3 px-4 py-3 bg-gray-50 rounded-xl",children:[(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Your share"}),(0,a.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["₹",c.myShare]})]}),i?(0,a.jsx)(J.Z,{className:"w-5 h-5 text-gray-600"}):(0,a.jsx)(Y.Z,{className:"w-5 h-5 text-gray-600"})]}),i&&(0,a.jsx)("div",{className:"md:hidden mb-3 p-4 bg-gray-50 rounded-xl max-h-64 overflow-y-auto",children:(0,a.jsx)(K,{compact:!0})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["₹",c.total]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[c.itemCount," items"]})]}),"active"===c.status&&(0,a.jsx)("button",{onClick:()=>{if(!c.customSplitValid){alert("Split amounts must equal the total order amount");return}confirm("Finalize this order for ₹".concat(c.total,"?"))&&s()},disabled:!c.customSplitValid,className:"\n                  px-8 py-4 rounded-2xl font-semibold text-white text-lg\n                  transition-all duration-300\n                  ".concat(c.customSplitValid?"bg-gradient-to-r from-green-500 to-green-600 hover:shadow-xl hover:scale-105 active:scale-95":"bg-gray-300 cursor-not-allowed","\n                "),children:"Finalize Order"}),"finalized"===c.status&&(0,a.jsx)("div",{className:"px-8 py-4 bg-green-100 text-green-800 rounded-2xl font-semibold",children:"Order Finalized ✓"})]})]})]})]})});class ${setCustomer(e){this.customer=e}setDeliveryAddress(e){this.deliveryAddress=e,this.isAddressVerified=!0}setDeliveryFee(e){this.deliveryFee=e}setEstimatedDeliveryTime(e){this.estimatedDeliveryTime=e}clearAddress(){this.deliveryAddress=null,this.isAddressVerified=!1,this.deliveryFee=0,this.estimatedDeliveryTime=""}setOrderType(e){this.orderType=e,"delivery"!==e&&this.clearAddress()}setPaymentMethod(e){this.paymentMethod=e}setSpecialInstructions(e){this.specialInstructions=e}setDeliveryTime(e){this.deliveryTime=e}setCurrentStep(e){this.currentStep=e}setCurrentOrder(e){this.currentOrder=e}setRazorpayOrder(e){this.razorpayOrder=e}setProcessing(e){this.isProcessing=e}setError(e){this.error=e}get isReadyForCheckout(){return!!this.customer&&("delivery"!==this.orderType||!!this.isAddressVerified)}get canPlaceOrder(){return this.isReadyForCheckout&&!this.isProcessing}resetOrder(){this.customer=null,this.deliveryAddress=null,this.isAddressVerified=!1,this.deliveryFee=0,this.estimatedDeliveryTime="",this.orderType="delivery",this.paymentMethod="online",this.specialInstructions="",this.deliveryTime="",this.currentOrder=null,this.razorpayOrder=null,this.isProcessing=!1,this.error=null,this.currentStep="address"}constructor(){this.customer=null,this.deliveryAddress=null,this.isAddressVerified=!1,this.deliveryFee=0,this.estimatedDeliveryTime="",this.orderType="delivery",this.paymentMethod="online",this.specialInstructions="",this.deliveryTime="",this.currentOrder=null,this.razorpayOrder=null,this.isProcessing=!1,this.error=null,this.currentStep="address",(0,l.ky)(this)}}let ee=new $;var et=s(9198),es=s(20),ea=s(4811);let er=(0,R.Pi)(function(e){var t,s,i;let{onComplete:n,backendUrl:l,sessionId:o}=e,[c,d]=(0,r.useState)((null===(t=ee.customer)||void 0===t?void 0:t.name)||""),[m,u]=(0,r.useState)((null===(s=ee.customer)||void 0===s?void 0:s.phone)||""),[x,h]=(0,r.useState)((null===(i=ee.customer)||void 0===i?void 0:i.email)||""),[p,g]=(0,r.useState)({}),y=e=>/^[6-9]\d{9}$/.test(e),b=async()=>{let e={};if(c.trim()||(e.name="Name is required"),m.trim()?y(m)||(e.phone="Please enter a valid 10-digit phone number"):e.phone="Phone number is required",Object.keys(e).length>0){g(e);return}if(o&&l)try{if(!(await fetch("".concat(l,"/api/restaurant/sessions/").concat(o,"/customer"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.trim(),phone:m.trim(),email:x.trim()||void 0})})).ok)throw Error("Failed to sync customer info");console.log("[CustomerInfo] Customer synced to backend - WebSocket will update orderStore")}catch(e){console.error("[CustomerInfo] Failed to sync customer info:",e),ee.setCustomer({name:c.trim(),phone:m.trim(),email:x.trim()||void 0})}else ee.setCustomer({name:c.trim(),phone:m.trim(),email:x.trim()||void 0});n()};return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"p-6 pb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-light neu-text tracking-tight",children:"Your Details"}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary opacity-60 mt-1",children:"We need a few details to confirm your order"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(et.Z,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>{d(e.target.value),p.name&&g({...p,name:void 0})},placeholder:"John Doe",className:"w-full pl-10 pr-4 py-3 bg-white/60 backdrop-blur-sm rounded-xl border ".concat(p.name?"border-red-300":"border-gray-200"," focus:border-orange-300 focus:ring-2 focus:ring-orange-100 transition-all outline-none")})]}),p.name&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:p.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(es.Z,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"tel",value:m,onChange:e=>{u(e.target.value.replace(/\D/g,"")),p.phone&&g({...p,phone:void 0})},placeholder:"9876543210",maxLength:10,className:"w-full pl-10 pr-4 py-3 bg-white/60 backdrop-blur-sm rounded-xl border ".concat(p.phone?"border-red-300":"border-gray-200"," focus:border-orange-300 focus:ring-2 focus:ring-orange-100 transition-all outline-none")})]}),p.phone&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:p.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email (Optional)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ea.Z,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"email",value:x,onChange:e=>h(e.target.value),placeholder:"john@example.com",className:"w-full pl-10 pr-4 py-3 bg-white/60 backdrop-blur-sm rounded-xl border border-gray-200 focus:border-orange-300 focus:ring-2 focus:ring-orange-100 transition-all outline-none"})]})]}),(0,a.jsx)("div",{className:"bg-blue-50/60 backdrop-blur-sm rounded-xl p-4 border border-blue-200/50",children:(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"We'll use this information to update you about your order status"})})]}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200/50",children:(0,a.jsx)("button",{onClick:b,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all",children:"Continue"})})]})});var ei=s(3891),en=s(7892),el=s(4153);let eo=(0,R.Pi)(function(e){let{onContinue:t,onBack:s}=e,[i,n]=(0,r.useState)(ee.orderType),[l,o]=(0,r.useState)(ee.paymentMethod);return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"p-6 pb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-light neu-text tracking-tight",children:"Order Details"}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary opacity-60 mt-1",children:"How would you like to receive your order?"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Order Type"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:()=>n("delivery"),className:"w-full p-4 rounded-xl border-2 transition-all ".concat("delivery"===i?"border-orange-500 bg-orange-50/60":"border-gray-200 bg-white/60 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("delivery"===i?"bg-orange-100":"bg-gray-100"),children:(0,a.jsx)(ei.Z,{className:"w-6 h-6 ".concat("delivery"===i?"text-orange-600":"text-gray-600")})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:"Delivery"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Get it delivered to your doorstep"})]}),(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center ".concat("delivery"===i?"border-orange-500 bg-orange-500":"border-gray-300"),children:"delivery"===i&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})]})}),(0,a.jsx)("button",{onClick:()=>n("pickup"),className:"w-full p-4 rounded-xl border-2 transition-all ".concat("pickup"===i?"border-orange-500 bg-orange-50/60":"border-gray-200 bg-white/60 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("pickup"===i?"bg-orange-100":"bg-gray-100"),children:(0,a.jsx)(y.Z,{className:"w-6 h-6 ".concat("pickup"===i?"text-orange-600":"text-gray-600")})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:"Pickup"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pick up from restaurant"})]}),(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center ".concat("pickup"===i?"border-orange-500 bg-orange-500":"border-gray-300"),children:"pickup"===i&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})]})}),(0,a.jsx)("button",{onClick:()=>n("dine-in"),className:"w-full p-4 rounded-xl border-2 transition-all ".concat("dine-in"===i?"border-orange-500 bg-orange-50/60":"border-gray-200 bg-white/60 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("dine-in"===i?"bg-orange-100":"bg-gray-100"),children:(0,a.jsx)(en.Z,{className:"w-6 h-6 ".concat("dine-in"===i?"text-orange-600":"text-gray-600")})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:"Dine-in"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Order at table"})]}),(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center ".concat("dine-in"===i?"border-orange-500 bg-orange-500":"border-gray-300"),children:"dine-in"===i&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Payment Method"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:()=>o("online"),className:"w-full p-4 rounded-xl border-2 transition-all ".concat("online"===l?"border-blue-500 bg-blue-50/60":"border-gray-200 bg-white/60 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("online"===l?"bg-blue-100":"bg-gray-100"),children:(0,a.jsx)(x.Z,{className:"w-6 h-6 ".concat("online"===l?"text-blue-600":"text-gray-600")})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:"Pay Online"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"UPI, Cards, Wallets"})]}),(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center ".concat("online"===l?"border-blue-500 bg-blue-500":"border-gray-300"),children:"online"===l&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})]})}),(0,a.jsx)("button",{onClick:()=>o("cash"),className:"w-full p-4 rounded-xl border-2 transition-all ".concat("cash"===l?"border-blue-500 bg-blue-50/60":"border-gray-200 bg-white/60 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("cash"===l?"bg-blue-100":"bg-gray-100"),children:(0,a.jsx)(el.Z,{className:"w-6 h-6 ".concat("cash"===l?"text-blue-600":"text-gray-600")})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsxs)("div",{className:"font-semibold text-gray-900",children:["Cash on ","delivery"===i?"Delivery":"pickup"===i?"Pickup":"Table"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pay when you receive"})]}),(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center ".concat("cash"===l?"border-blue-500 bg-blue-500":"border-gray-300"),children:"cash"===l&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})]})})]})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200/50 space-y-3",children:[(0,a.jsx)("button",{onClick:()=>{ee.setOrderType(i),ee.setPaymentMethod(l),t()},className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all",children:"Continue"}),s&&(0,a.jsx)("button",{onClick:s,className:"w-full text-gray-600 hover:text-gray-900 py-2 transition-colors",children:"Back"})]})]})});function ec(e){switch(e){case"home":return{icon:"\uD83C\uDFE0",color:"text-blue-600"};case"work":return{icon:"\uD83D\uDCBC",color:"text-purple-600"};default:return{icon:"\uD83D\uDCCD",color:"text-gray-600"}}}let ed=(0,R.Pi)(function(e){var t;let{sessionId:s,backendUrl:i,onAddressVerified:n}=e,[l,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[y,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(null),[w,C]=(0,r.useState)([]),[S,I]=(0,r.useState)(!1),[A,P]=(0,r.useState)("other"),[T,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{var e;let t=null===(e=ee.customer)||void 0===e?void 0:e.phone;if(t)try{let e=sessionStorage.getItem("stonepot_saved_addresses");if(e){let t=JSON.parse(e);if(t.length>0){C(t),I(!0),console.log("[AddressEntry] Loaded",t.length,"saved addresses from WebSocket cache"),sessionStorage.removeItem("stonepot_saved_addresses");return}}let a=await fetch("".concat(i,"/api/restaurant/sessions/").concat(s,"/address-history?phone=").concat(t)),r=await a.json();r.success&&r.addresses.length>0&&(C(r.addresses),I(!0),console.log("[AddressEntry] Loaded",r.addresses.length,"saved addresses from HTTP fallback"))}catch(e){console.error("[AddressEntry] Failed to load saved addresses:",e)}})()},[s,i,null===(t=ee.customer)||void 0===t?void 0:t.phone]);let O=async e=>{j(!0),N(null);try{let t="",a={};if(e.placeId)t="".concat(i,"/api/restaurant/sessions/").concat(s,"/quick-address"),a={placeId:e.placeId,apartment:e.apartment,landmark:e.landmark,instructions:e.instructions,label:e.label,isDefault:e.isDefault},console.log("[AddressEntry] Using optimized placeId lookup for",e.label);else if(e.coordinates)t="".concat(i,"/api/restaurant/sessions/").concat(s,"/migrate-address"),a={coordinates:e.coordinates,apartment:e.apartment,landmark:e.landmark,instructions:e.instructions,label:e.label,isDefault:e.isDefault},console.log("[AddressEntry] Migrating legacy address to get placeId");else throw Error("Address has neither placeId nor coordinates");let r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await r.json();if(!r.ok)throw Error(l.message||"Failed to verify address");if(!l.eligible){N(l.message||"Delivery not available to this address");return}ee.setDeliveryAddress({formatted:l.address.formatted,coordinates:l.address.coordinates,placeId:l.address.placeId,pincode:l.address.pincode,city:l.address.city,state:l.address.state,apartment:l.address.apartment,landmark:l.address.landmark,instructions:l.address.instructions}),ee.setDeliveryFee(l.delivery.fee),ee.setEstimatedDeliveryTime(l.delivery.estimatedTime),console.log("[AddressEntry] Used optimized placeId lookup"),n&&n()}catch(e){console.error("Quick address lookup error:",e),N(e instanceof Error?e.message:"Failed to verify address")}finally{j(!1)}},R=async()=>{if(!l.trim()){N("Please enter an address");return}j(!0),N(null);try{let e=await fetch("".concat(i,"/api/restaurant/sessions/").concat(s,"/geocode-address"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addressString:l,apartment:x||void 0,landmark:c||void 0,pincode:m||void 0,instructions:p||void 0,label:A,isDefault:T})}),t=await e.json();if(!e.ok)throw Error(t.message||"Failed to verify address");if(!t.eligible){N(t.message||"Delivery not available to this address");return}ee.setDeliveryAddress({formatted:t.address.formatted,coordinates:t.address.coordinates,placeId:t.address.placeId,pincode:t.address.pincode,city:t.address.city,state:t.address.state,apartment:x||void 0,landmark:c||void 0,instructions:p||void 0}),ee.setDeliveryFee(t.delivery.fee),ee.setEstimatedDeliveryTime(t.delivery.estimatedTime),n&&n()}catch(e){console.error("Address verification error:",e),N(e instanceof Error?e.message:"Failed to verify address")}finally{j(!1)}};return ee.isAddressVerified&&ee.deliveryAddress?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-green-50/80 backdrop-blur-sm rounded-2xl p-6 border border-green-200/50",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(Q.Z,{className:"w-5 h-5 text-green-600"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-green-900 mb-1",children:"Address Verified"}),(0,a.jsx)("p",{className:"text-sm text-green-700 mb-3",children:ee.deliveryAddress.formatted}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"bg-white/80 rounded-lg px-3 py-1.5",children:[(0,a.jsx)("span",{className:"text-green-600",children:"Delivery: "}),(0,a.jsx)("span",{className:"font-medium text-green-900",children:0===ee.deliveryFee?"FREE":"₹".concat(ee.deliveryFee)})]}),(0,a.jsxs)("div",{className:"bg-white/80 rounded-lg px-3 py-1.5",children:[(0,a.jsx)("span",{className:"text-green-600",children:"Time: "}),(0,a.jsx)("span",{className:"font-medium text-green-900",children:ee.estimatedDeliveryTime})]})]})]})]})}),(0,a.jsx)("button",{onClick:()=>ee.clearAddress(),className:"w-full text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Change address"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[S&&w.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 text-orange-600"}),(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Quick Select (Optimized)"})]}),w.map((e,t)=>{let s=ec(e.label),r=function(e){let t=[];return e.apartment&&t.push(e.apartment),e.landmark&&t.push(e.landmark),e.pincode&&t.push(e.pincode),t.join(" • ")||e.formatted}(e);return(0,a.jsx)("button",{onClick:()=>O(e),disabled:y,className:"w-full text-left p-4 backdrop-blur-sm rounded-xl border transition-all disabled:opacity-50 disabled:cursor-not-allowed ".concat(e.isDefault?"bg-green-50/80 hover:bg-green-100/80 border-green-200/50":"bg-orange-50/80 hover:bg-orange-100/80 border-orange-200/50"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"text-2xl flex-shrink-0 ".concat(s.color),children:s.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 capitalize",children:e.label}),e.isDefault&&(0,a.jsx)("span",{className:"text-xs bg-green-600 text-white px-2 py-0.5 rounded-full",children:"Default"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:r})]}),(0,a.jsx)("span",{className:"text-xs font-medium flex-shrink-0 ".concat(e.isDefault?"text-green-600":"text-orange-600"),children:e.placeId?"⚡ Fast":"Saved"})]})},t)}),(0,a.jsx)("button",{onClick:()=>I(!1),className:"w-full text-sm text-gray-600 hover:text-gray-900 transition-colors py-2",children:"Or enter a new address"})]}),(!S||0===w.length)&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Address *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"House no, Street, Area",className:"w-full pl-10 pr-4 py-3 bg-white/60 backdrop-blur-sm rounded-xl border border-gray-200 focus:border-orange-300 focus:ring-2 focus:ring-orange-100 transition-all outline-none"})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"Apartment, Floor (optional)",className:"w-full px-4 py-3 bg-white/60 backdrop-blur-sm rounded-xl border border-gray-200 focus:border-orange-300 focus:ring-2 focus:ring-orange-100 transition-all outline-none"})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Nearby landmark (optional)",className:"w-full px-4 py-3 bg-white/60 backdrop-blur-sm rounded-xl border border-gray-200 focus:border-orange-300 focus:ring-2 focus:ring-orange-100 transition-all outline-none"})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),placeholder:"Pincode (optional)",maxLength:6,className:"w-full px-4 py-3 bg-white/60 backdrop-blur-sm rounded-xl border border-gray-200 focus:border-orange-300 focus:ring-2 focus:ring-orange-100 transition-all outline-none"})}),(0,a.jsx)("div",{children:(0,a.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"Delivery instructions (optional)",rows:2,className:"w-full px-4 py-3 bg-white/60 backdrop-blur-sm rounded-xl border border-gray-200 focus:border-orange-300 focus:ring-2 focus:ring-orange-100 transition-all outline-none resize-none"})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Save this address as:"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["home","work","other"].map(e=>{let t=ec(e);return(0,a.jsxs)("button",{type:"button",onClick:()=>P(e),className:"flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ".concat(A===e?"border-orange-500 bg-orange-50":"border-gray-200 bg-white/60 hover:border-orange-300"),children:[(0,a.jsx)("span",{className:"text-2xl mb-1",children:t.icon}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700 capitalize",children:e})]},e)})}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:T,onChange:e=>D(e.target.checked),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Set as default address"})]})]}),v&&(0,a.jsx)("div",{className:"bg-red-50/80 backdrop-blur-sm rounded-xl p-4 border border-red-200/50",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(k.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-700",children:v})]})}),(0,a.jsx)("button",{onClick:R,disabled:y||!l.trim(),className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-medium py-4 rounded-xl shadow-lg hover:shadow-xl transition-all disabled:cursor-not-allowed disabled:shadow-none",children:y?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Verifying Address..."]}):"Verify Address"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"We'll check if we deliver to your location"}),w.length>0&&(0,a.jsx)("button",{onClick:()=>I(!0),className:"w-full text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Back to saved addresses"})]})]})}),em=(0,R.Pi)(function(e){let{onConfirm:t,onBack:s}=e,r=M.total,i="delivery"===ee.orderType?ee.deliveryFee:0,n=Math.round((r+i)*5)/100,l=r+i+n;return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"p-6 pb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-light neu-text tracking-tight",children:"Order Summary"}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary opacity-60 mt-1",children:"Review your order before placing"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 space-y-6",children:[ee.customer&&(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(et.Z,{className:"w-4 h-4"}),"Customer Details"]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,a.jsx)(et.Z,{className:"w-4 h-4 text-gray-400"}),ee.customer.name]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,a.jsx)(es.Z,{className:"w-4 h-4 text-gray-400"}),ee.customer.phone]}),ee.customer.email&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,a.jsx)(ea.Z,{className:"w-4 h-4 text-gray-400"}),ee.customer.email]})]})]}),"delivery"===ee.orderType&&ee.deliveryAddress&&(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4"}),"Delivery Address"]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:ee.deliveryAddress.formatted}),ee.estimatedDeliveryTime&&(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-orange-600",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Estimated: ",ee.estimatedDeliveryTime]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-orange-50 text-orange-700 px-4 py-2 rounded-full text-sm font-medium",children:"delivery"===ee.orderType?"\uD83D\uDEB4 Delivery":"pickup"===ee.orderType?"\uD83C\uDFEA Pickup":"\uD83C\uDF7D️ Dine-in"}),(0,a.jsx)("div",{className:"bg-blue-50 text-blue-700 px-4 py-2 rounded-full text-sm font-medium",children:"online"===ee.paymentMethod?"\uD83D\uDCB3 Pay Online":"\uD83D\uDCB5 Cash on "+("delivery"===ee.orderType?"Delivery":"Pickup")})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 mb-4",children:["Order Items (",M.itemCount,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:M.items.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-3",children:[e.imageUrl&&(0,a.jsx)(z.default,{src:e.imageUrl,alt:e.name,width:60,height:60,className:"rounded-lg object-cover flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:e.name}),e.customization&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.customization})]}),(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"veg"===e.type?"#dcfce7":"#fee2e2",color:"veg"===e.type?"#166534":"#991b1b"},children:"veg"===e.type?"\uD83D\uDFE2":"\uD83D\uDD34"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Qty: ",e.quantity]}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["₹",e.price*e.quantity]})]})]})]},"".concat(e.name,"-").concat(t)))})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:["₹",r.toFixed(2)]})]}),i>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Delivery Fee"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:["₹",i.toFixed(2)]})]}),0===i&&"delivery"===ee.orderType&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Delivery Fee"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:"FREE"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"GST (5%)"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:["₹",n.toFixed(2)]})]}),(0,a.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Total"}),(0,a.jsxs)("span",{className:"font-bold text-xl text-orange-600",children:["₹",l.toFixed(2)]})]})})]}),ee.specialInstructions&&(0,a.jsxs)("div",{className:"bg-amber-50/60 backdrop-blur-sm rounded-2xl p-4 border border-amber-200/50",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-amber-900 mb-2",children:"Special Instructions"}),(0,a.jsx)("p",{className:"text-sm text-amber-700",children:ee.specialInstructions})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200/50 space-y-3",children:[(0,a.jsx)("button",{onClick:t,disabled:ee.isProcessing,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-semibold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all disabled:cursor-not-allowed",children:ee.isProcessing?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:["online"===ee.paymentMethod?"Proceed to Payment":"Place Order"," • ₹",l.toFixed(2)]})}),s&&(0,a.jsx)("button",{onClick:s,disabled:ee.isProcessing,className:"w-full text-gray-600 hover:text-gray-900 py-2 transition-colors disabled:opacity-50",children:"Back"})]})]})}),eu=(0,R.Pi)(function(e){let{backendUrl:t,onPaymentSuccess:s,onPaymentError:i}=e,[n,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=document.createElement("script");return e.src="https://checkout.razorpay.com/v1/checkout.js",e.async=!0,e.onload=()=>l(!0),e.onerror=()=>m("Failed to load payment gateway"),document.body.appendChild(e),()=>{document.body.removeChild(e)}},[]);let u=async()=>{if(!ee.razorpayOrder||!ee.customer){m("Payment information not available");return}c(!0),m(null);try{let e={key:ee.razorpayOrder.keyId,amount:ee.razorpayOrder.amount,currency:ee.razorpayOrder.currency,order_id:ee.razorpayOrder.id,name:"Stonepot Restaurant",description:"Food Order Payment",image:"/logo.png",prefill:{name:ee.customer.name,contact:ee.customer.phone,email:ee.customer.email||""},theme:{color:"#f97316"},handler:async function(e){try{var a,r;let i=await fetch("".concat(t,"/api/restaurant/orders/").concat(null===(a=ee.currentOrder)||void 0===a?void 0:a.orderId,"/verify-payment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpayOrderId:e.razorpay_order_id,razorpayPaymentId:e.razorpay_payment_id,razorpaySignature:e.razorpay_signature})}),n=await i.json();if(!i.ok||!n.verified)throw Error("Payment verification failed");s({orderId:null===(r=ee.currentOrder)||void 0===r?void 0:r.orderId,razorpayOrderId:e.razorpay_order_id,razorpayPaymentId:e.razorpay_payment_id,verified:!0})}catch(e){console.error("Payment verification error:",e),m("Payment verification failed. Please contact support."),i&&i(e)}finally{c(!1)}},modal:{ondismiss:function(){c(!1),m("Payment cancelled")}}};new window.Razorpay(e).open()}catch(e){console.error("Payment initialization error:",e),m("Failed to initialize payment"),c(!1),i&&i(e)}};return n?ee.currentOrder&&ee.razorpayOrder?(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"p-6 pb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-light neu-text tracking-tight",children:"Payment"}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary opacity-60 mt-1",children:"Complete your payment to place order"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg",children:[(0,a.jsx)("p",{className:"text-sm opacity-90 mb-2",children:"Total Amount"}),(0,a.jsxs)("p",{className:"text-4xl font-bold",children:["₹",(ee.razorpayOrder.amount/100).toFixed(2)]}),(0,a.jsxs)("p",{className:"text-sm opacity-75 mt-2",children:["Order #",ee.currentOrder.orderId]})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-gray-100/50",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Payment Methods"]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 text-green-600"}),"Credit/Debit Cards"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 text-green-600"}),"UPI (Google Pay, PhonePe, Paytm)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 text-green-600"}),"Net Banking"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 text-green-600"}),"Wallets"]})]})]}),(0,a.jsx)("div",{className:"bg-blue-50/60 backdrop-blur-sm rounded-2xl p-5 border border-blue-200/50",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-blue-600"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-1",children:"Secure Payment"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Your payment information is encrypted and secure. We use Razorpay for secure payment processing."})]})]})}),d&&(0,a.jsx)("div",{className:"bg-red-50/80 backdrop-blur-sm rounded-xl p-4 border border-red-200/50",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(k.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-700",children:d})]})})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200/50",children:[(0,a.jsx)("button",{onClick:u,disabled:o,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-semibold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Pay ₹",(ee.razorpayOrder.amount/100).toFixed(2)]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center mt-3",children:"By continuing, you agree to our Terms & Conditions"})]})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(k.Z,{className:"w-12 h-12 text-red-500 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Payment information not available"})]})}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 text-orange-500 animate-spin mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading payment gateway..."})]})})}),ex=(0,R.Pi)(function(e){let{onNewOrder:t}=e,s=ee.currentOrder;return s?(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex-1 p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-green-100 rounded-full animate-ping opacity-75"}),(0,a.jsx)("div",{className:"relative bg-gradient-to-br from-green-500 to-green-600 w-24 h-24 rounded-full flex items-center justify-center mx-auto shadow-lg",children:(0,a.jsx)(v.Z,{className:"w-12 h-12 text-white",strokeWidth:2.5})})]}),(0,a.jsx)("h2",{className:"text-3xl font-light neu-text mt-6 mb-2",children:"Order Confirmed!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Thank you for your order"})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-gray-100/50 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Order ID"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900 font-mono",children:s.orderId})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:["delivery"===s.orderType?(0,a.jsx)(ei.Z,{className:"w-6 h-6"}):(0,a.jsx)(b.Z,{className:"w-6 h-6"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"delivery"===s.orderType?"Delivery Order":"pickup"===s.orderType?"Pickup Order":"Dine-in Order"})]}),s.estimatedDeliveryTime&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-90",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Estimated Time: ",s.estimatedDeliveryTime]}),!s.estimatedDeliveryTime&&(0,a.jsx)("p",{className:"text-sm opacity-90",children:"We'll prepare your order shortly"})]}),"delivery"===s.orderType&&s.deliveryAddress&&(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5"}),"Delivery Address"]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:s.deliveryAddress.formatted})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Payment"]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"online"===s.paymentMethod?"Paid Online":"Cash on ".concat("delivery"===s.orderType?"Delivery":"Pickup")}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["₹",s.total.toFixed(2)]})]}),"online"===s.paymentMethod&&(0,a.jsx)("div",{className:"mt-2 inline-block bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-medium",children:"✓ Payment Successful"})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 border border-gray-100/50",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 mb-3",children:["Order Summary (",s.items.length," items)"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[s.items.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-700",children:[e.quantity,"x ",e.dishName||e.name]}),(0,a.jsxs)("span",{className:"text-gray-900 font-medium",children:["₹",(e.price*e.quantity).toFixed(2)]})]},t)),s.items.length>3&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 italic",children:["+",s.items.length-3," more items"]}),(0,a.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,a.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,a.jsxs)("span",{className:"text-orange-600",children:["₹",s.total.toFixed(2)]})]})})]})]}),(0,a.jsx)("div",{className:"bg-blue-50/60 backdrop-blur-sm rounded-2xl p-5 border border-blue-200/50",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(es.Z,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-1",children:"Need Help?"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Contact us if you have any questions about your order"})]})]})}),(0,a.jsxs)("div",{className:"text-center space-y-2 py-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"We'll notify you when your order is ready"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Keep this page for order reference"})]})]}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200/50 space-y-3",children:(0,a.jsx)("button",{onClick:()=>{M.clearCart(),ee.resetOrder(),t&&t()},className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all",children:"Place New Order"})})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No order information available"})})}),eh=(0,R.Pi)(function(e){let{isOpen:t,onClose:s,sessionId:i,backendUrl:n}=e,[l,o]=(0,r.useState)("customer");if((0,r.useEffect)(()=>{t&&(ee.customer?ee.orderType&&"delivery"!==ee.orderType?o("checkout"):o("order-type"):o("customer"))},[t]),!t)return null;let c=()=>{o("order-type")},d=()=>{"delivery"===ee.orderType?o("address"):o("checkout")},m=()=>{o("checkout")},u=async()=>{if(!i){console.error("[OrderFlow] No session ID available");return}try{ee.setProcessing(!0);let e=await fetch("".concat(n,"/api/restaurant/sessions/").concat(i,"/orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:ee.customer,cart:{items:M.items.map(e=>({dishName:e.name,dishType:e.type,quantity:e.quantity,price:e.price,customization:e.customization})),subtotal:M.total},orderType:ee.orderType,paymentMethod:ee.paymentMethod,deliveryAddress:ee.deliveryAddress,specialInstructions:ee.specialInstructions})}),t=await e.json();if(!e.ok)throw Error(t.message||"Failed to create order");ee.setCurrentOrder(t),"online"===ee.paymentMethod&&t.razorpayOrder?(ee.setRazorpayOrder(t.razorpayOrder),o("payment")):o("confirmation")}catch(e){console.error("[OrderFlow] Order creation failed:",e),alert(e instanceof Error?e.message:"Failed to create order")}finally{ee.setProcessing(!1)}},x=()=>{o("confirmation")},h=e=>{console.error("[OrderFlow] Payment error:",e),alert("Payment failed. Please try again.")},p=()=>{M.clearCart(),ee.resetOrder(),o("customer"),s()},g=()=>{"order-type"===l?o("customer"):"address"===l?o("order-type"):"checkout"===l&&("delivery"===ee.orderType?o("address"):o("order-type"))};return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex",onClick:s,children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity"}),(0,a.jsxs)("div",{className:"ml-auto relative w-full max-w-md h-full shadow-2xl",onClick:e=>e.stopPropagation(),style:{animation:"slideInFromRight 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},children:["confirmation"!==l&&(0,a.jsx)("button",{onClick:s,className:"absolute top-4 right-4 z-10 w-10 h-10 rounded-full bg-white/60 backdrop-blur-sm hover:bg-white/80 flex items-center justify-center transition-all shadow-lg","aria-label":"Close order flow",children:(0,a.jsx)(F.Z,{className:"w-5 h-5 text-gray-700"})}),(()=>{switch(l){case"customer":return(0,a.jsx)(er,{onComplete:c,backendUrl:n,sessionId:i||""});case"order-type":return(0,a.jsx)(eo,{onContinue:d,onBack:g});case"address":return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gradient-to-b from-white/95 to-gray-50/95 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"p-6 pb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-light neu-text tracking-tight",children:"Delivery Address"}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary opacity-60 mt-1",children:"Where should we deliver your order?"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-6",children:(0,a.jsx)(ed,{sessionId:i||"",backendUrl:n,onAddressVerified:m})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200/50",children:(0,a.jsx)("button",{onClick:g,className:"w-full text-gray-600 hover:text-gray-900 py-2 transition-colors",children:"Back"})})]});case"checkout":return(0,a.jsx)(em,{onConfirm:u,onBack:g});case"payment":return(0,a.jsx)(eu,{backendUrl:n,onPaymentSuccess:x,onPaymentError:h});case"confirmation":return(0,a.jsx)(ex,{onNewOrder:p});default:return null}})()]})]})});var ep=s(9419);function eg(e){let{toasts:t,onRemove:s}=e;return(0,a.jsx)("div",{className:"fixed top-20 right-6 z-50 space-y-3 max-w-sm",children:t.map(e=>(0,a.jsx)(ey,{toast:e,onRemove:s},e.id))})}function ey(e){let{toast:t,onRemove:s}=e,[i,n]=(0,r.useState)(!1);(0,r.useEffect)(()=>{setTimeout(()=>n(!0),10);let e=setTimeout(()=>{n(!1),setTimeout(()=>s(t.id),300)},t.duration||4e3);return()=>clearTimeout(e)},[t.id,t.duration,s]);let l={success:(0,a.jsx)(w.Z,{className:"w-5 h-5 text-green-600"}),error:(0,a.jsx)(k.Z,{className:"w-5 h-5 text-red-600"}),info:(0,a.jsx)(ep.Z,{className:"w-5 h-5 text-blue-600"}),participant:(0,a.jsx)(X.Z,{className:"w-5 h-5 text-blue-600"})};return(0,a.jsxs)("div",{className:"\n        ".concat({success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200",participant:"bg-blue-50 border-blue-200"}[t.type]," ").concat({success:"text-green-900",error:"text-red-900",info:"text-blue-900",participant:"text-blue-900"}[t.type],"\n        border rounded-xl shadow-lg backdrop-blur-sm\n        p-4 flex items-start gap-3\n        transition-all duration-300 ease-out\n        ").concat(i?"translate-x-0 opacity-100":"translate-x-full opacity-0","\n      "),style:{animation:i?"slideInRight 0.3s ease-out":void 0},children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:l[t.type]}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("p",{className:"text-sm font-medium break-words",children:t.message})}),(0,a.jsx)("button",{onClick:()=>{n(!1),setTimeout(()=>s(t.id),300)},className:"flex-shrink-0 w-6 h-6 rounded-full hover:bg-white/50 flex items-center justify-center transition-colors",children:(0,a.jsx)(F.Z,{className:"w-4 h-4"})})]})}class eb{highlightItem(e){this.highlightedItemName=e,this.scrollToItemName=e,setTimeout(()=>{this.highlightedItemName===e&&(this.highlightedItemName=null)},5e3)}clearHighlight(){this.highlightedItemName=null}clearScrollTarget(){this.scrollToItemName=null}isHighlighted(e){return this.highlightedItemName===e}constructor(){this.highlightedItemName=null,this.scrollToItemName=null,(0,l.ky)(this)}}let ef=new eb;var ej=s(4354),ev=s(4313),eN=(0,R.Pi)(e=>{let{item:t,highlighted:s}=e,[i,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(t.choices[0]),c=(0,r.useRef)(null),d=s||ef.isHighlighted(t.name);(0,r.useEffect)(()=>{ef.scrollToItemName===t.name&&c.current&&(c.current.scrollIntoView({behavior:"smooth",block:"center"}),ef.clearScrollTarget())},[ef.scrollToItemName,t.name]);let m=e=>{o(e),n(!1)};return(0,a.jsxs)("div",{ref:c,className:"neu-card overflow-hidden hover-lift transition-all duration-normal ".concat(d?"ring-4 ring-voice-listening shadow-2xl":""),children:[t.imageUrl&&(0,a.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200",children:[(0,a.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}),t.tag&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-error text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,a.jsx)("span",{children:"\uD83D\uDD25"}),(0,a.jsx)("span",{children:t.tag})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-xl font-bold neu-text mb-1",children:t.name}),(0,a.jsx)("span",{className:"text-xs neu-text-secondary uppercase tracking-wide",children:"Combo Meal"})]}),(0,a.jsxs)("div",{className:"text-lg font-bold neu-text-accent",children:["₹",t.price]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t.rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-warning",children:"⭐"}),(0,a.jsx)("span",{className:"font-semibold neu-text",children:t.rating.toFixed(1)}),t.reviews&&(0,a.jsxs)("span",{className:"text-xs neu-text-secondary",children:["(",t.reviews,")"]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("veg"===t.type?"bg-veg-light text-veg-dark border border-veg":"bg-non-veg-light text-non-veg-dark border border-non-veg"),children:"veg"===t.type?"\uD83C\uDF31 Veg":"\uD83C\uDF56 Non-Veg"})]}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary leading-relaxed",children:t.description}),l&&(0,a.jsxs)("div",{className:"neu-concave p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs neu-text-secondary mb-1",children:"Selected:"}),(0,a.jsx)("p",{className:"text-sm font-semibold neu-text",children:l})]}),(0,a.jsx)("button",{onClick:()=>n(!i),className:"text-sm font-semibold text-info hover:text-info/80",children:i?"Hide Options":"Customize"}),(0,a.jsx)(ej.M,{children:i&&(0,a.jsxs)(ev.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"neu-concave rounded-lg overflow-hidden",children:[(0,a.jsx)("p",{className:"text-xs font-semibold neu-text p-3 border-b border-gray-200",children:"Choose your option:"}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:t.choices.map((e,t)=>(0,a.jsxs)("label",{className:"flex items-center p-3 cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"combo-choice",value:e,checked:l===e,onChange:()=>m(e),className:"mr-3"}),(0,a.jsx)("span",{className:"text-sm neu-text",children:e})]},t))})]})}),(0,a.jsx)("button",{onClick:()=>{M.addComboItem(t,l)},disabled:!1===t.available,className:"w-full neu-button-accent rounded-xl px-6 py-3 text-base font-semibold transition-all ".concat(!1===t.available?"opacity-50 cursor-not-allowed":""),children:!1===t.available?"Not Available":"Add to Order • ₹".concat(t.price)})]})]})}),ew=(0,R.Pi)(e=>{let{item:t,highlighted:s}=e,[i,n]=(0,r.useState)(0),l=(0,r.useRef)(null),o=s||ef.isHighlighted(t.name);return(0,r.useEffect)(()=>{let e=M.items.find(e=>e.name===t.name&&e.type===t.type);n(e?e.quantity:0)},[t.name,t.type,M.items.length]),(0,r.useEffect)(()=>{ef.scrollToItemName===t.name&&l.current&&(l.current.scrollIntoView({behavior:"smooth",block:"center"}),ef.clearScrollTarget())},[ef.scrollToItemName,t.name]),(0,a.jsxs)("div",{ref:l,className:"neu-card overflow-hidden hover-lift transition-all duration-300 ".concat(o?"ring-4 ring-voice-listening shadow-2xl":""),children:[t.imageUrl&&(0,a.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200",children:[(0,a.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}),t.isBestseller&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-error text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,a.jsx)("span",{children:"\uD83D\uDD25"}),(0,a.jsx)("span",{children:"Bestseller"})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-xl font-bold neu-text mb-1",children:t.name}),(0,a.jsxs)("div",{className:"text-lg font-bold neu-text-accent",children:["₹",t.price]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t.rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-yellow-500",children:"⭐"}),(0,a.jsx)("span",{className:"font-semibold neu-text",children:t.rating.toFixed(1)}),t.reviews&&(0,a.jsxs)("span",{className:"text-xs neu-text-secondary",children:["(",t.reviews,")"]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat("veg"===t.type?"bg-veg-light text-veg-dark border-veg":"bg-non-veg-light text-non-veg-dark border-non-veg"),children:"veg"===t.type?"\uD83C\uDF31 Veg":"\uD83C\uDF56 Non-Veg"})]}),(0,a.jsx)("p",{className:"text-sm neu-text-secondary leading-relaxed",children:t.description}),0===i?(0,a.jsx)("button",{onClick:()=>{M.addMenuItem(t),n(1)},disabled:!1===t.available,className:"w-full neu-button-accent rounded-xl px-6 py-3 text-base font-semibold transition-all ".concat(!1===t.available?"opacity-50 cursor-not-allowed":""),children:!1===t.available?"Not Available":"Add to Order • ₹".concat(t.price)}):(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 neu-concave rounded-xl overflow-hidden p-1",children:[(0,a.jsx)("button",{onClick:()=>{i>1?(M.updateQuantity(t.name,t.type,i-1),n(i-1)):1===i&&(M.removeItem(t.name,t.type),n(0))},className:"w-10 h-10 flex items-center justify-center neu-button rounded-lg font-bold",children:"−"}),(0,a.jsx)("span",{className:"px-4 font-semibold neu-text min-w-[2rem] text-center",children:i}),(0,a.jsx)("button",{onClick:()=>{M.updateQuantity(t.name,t.type,i+1),n(i+1)},className:"w-10 h-10 flex items-center justify-center neu-button rounded-lg font-bold",children:"+"})]}),(0,a.jsxs)("div",{className:"font-bold neu-text-accent",children:["₹",t.price*i]})]})]})]})});let ek=[{name:"Veg Kuttu Curry Combo [serves 1]",price:199,description:"Puttus, Otti or Rice of your choice - serves One",category:"combos",type:"veg",tag:"bestseller",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/7770c2bb-c535-4854-6ee6-a356bb407300/public",available:!0,rating:4.5},{name:"Veg Curry Combo (Bimballe curry)",price:199,description:"Puttus, Otti or Rice of your choice - serves One",category:"combos",type:"veg",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/7770c2bb-c535-4854-6ee6-a356bb407300/public"},{name:"Egg Curry Combo -1ps Eggserve 1",price:240,description:"Choose any one Puttu / Rice of your choice",category:"combos",type:"non-veg",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/7770c2bb-c535-4854-6ee6-a356bb407300/public"},{name:"Pandi Curry Combo",price:255,description:"Choose any one Puttu / Rice of your choice",category:"combos",type:"non-veg",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/dc08d86c-83d9-466f-56fc-959070195600/public"},{name:"Koli Curry Combo (Chicken)",price:250,description:"Choose any one Puttu / Rice of your choice",category:"combos",type:"non-veg",choices:["Paputtu","Kadambuttu","Noolputtu","Akki Otti","Ney Kulu","Steamed Rice"],imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/7770c2bb-c535-4854-6ee6-a356bb407300/public"},{name:"Spicy Smoked Pork(onake Erachi)",price:460,description:"Onake Erachi Spicy Smoked Pork",category:"appetizers",rating:4.7,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Mutton Pepper Fry",price:460,description:"Mutton roasted in fresh pepper sourced from our estates in Coorg.",category:"appetizers",rating:4.6,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Pepper Chicken Fry(kodava Koli Bharthad",price:300,description:"Succulent pepper chicken fry.",category:"appetizers",rating:4.1,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/c4e60a3d-43a7-41d2-2b19-d64c18cc9600/public"},{name:"Chicken Cutlet-4ps",price:315,description:"Mildly spiced, soft chicken cutlets.",category:"appetizers",rating:4.1,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/c4e60a3d-43a7-41d2-2b19-d64c18cc9600/public"},{name:"Pork Fry (pandi Barthad)-220gm",price:340,description:"Slow cooked pork in traditional black masala.",category:"appetizers",rating:4.2,type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/c4e60a3d-43a7-41d2-2b19-d64c18cc9600/public"},{name:"Veg Cutlet",price:225,description:"Check for the day special.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2a0b331f-03f2-4daa-b9a0-5f25e2d6df00/public"},{name:"Crispy Bhendi Fry",price:225,description:"Ladies finger batter fried to a crisp with spices.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/6ce44b67-2b64-4211-9f8f-4f22b921e700/public"},{name:"Tangy Bitter Gourd Fry(kaipake Fry)",price:225,description:"Tangy bitter gourd fried, and seasoned with chilli and lime.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/d20f696b-956c-4f89-bd05-679c3e5d3400/public"},{name:"Kadle Palya",price:210,description:"Steamed black chana seasoned in spices.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/cee7e8b9-efed-41e5-c10c-2417d02fa300/public"},{name:"Crispy Banana Fritters(bale Kai Fry)",price:225,description:"Crispy Tangy raw banana fritters.",category:"appetizers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Paputtu",price:60,description:"Traditional Coorgi rice cake",category:"ottis-puttus-rice",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Kadambuttu",price:60,description:"Rice dumplings",category:"ottis-puttus-rice",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Noolputtu",price:60,description:"String hoppers",category:"ottis-puttus-rice",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Pandi Curry",price:245,description:"Traditional Coorgi pork curry",category:"curries",type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Kadle Curry",price:165,description:"Black chickpea curry",category:"curries",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Koli Curry",price:225,description:"Spicy chicken curry",category:"curries",type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/30bd3da1-423d-42f5-6a53-e7c3f471df00/public"},{name:"Payasam",price:80,description:"Sweet milk pudding with vermicelli",category:"desserts",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Elaneer Payasam",price:90,description:"Tender coconut pudding",category:"desserts",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Chikkrotti",price:70,description:"Traditional Coorgi sweet",category:"desserts",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Neer More",price:60,description:"Spiced buttermilk",category:"coolers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Fresh Lime Soda",price:70,description:"Refreshing lime soda",category:"coolers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Tender Coconut Water",price:80,description:"Natural coconut water",category:"coolers",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Tomato Soup",price:90,description:"Classic tomato soup",category:"soups",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Chicken Sweet Corn Soup",price:110,description:"Creamy chicken and corn soup",category:"soups",type:"non-veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"},{name:"Mushroom Soup",price:100,description:"Creamy mushroom soup",category:"soups",type:"veg",imageUrl:"https://imagedelivery.net/12jhjXIVHRTQjCWbyguS5A/2810bb84-7864-4891-4e2f-324568792500/public"}],eC=["all","combos","appetizers","ottis-puttus-rice","curries","desserts","coolers","soups"],eS=(0,R.Pi)(()=>{let[e,t]=(0,r.useState)("all"),s=(0,r.useRef)(null),[i,n]=(0,r.useState)(!1),l=ek.filter(t=>("all"===e||t.category===e)&&(!i||"veg"===t.type));return(0,r.useEffect)(()=>{if(s.current){let t=s.current.querySelector('[data-category="'.concat(e,'"]'));t&&t.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[e]),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center neu-text",children:"Our Menu"}),(0,a.jsx)("div",{className:"relative mb-6 overflow-hidden",children:(0,a.jsx)("div",{ref:s,className:"flex overflow-x-auto pb-2 gap-2",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:eC.map(s=>(0,a.jsx)("button",{"data-category":s,className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 ".concat(e===s?"neu-button-accent":"neu-button"),onClick:()=>t(s),children:s.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")},s))})}),(0,a.jsxs)("div",{className:"flex justify-center items-center mb-6",children:[(0,a.jsx)("span",{className:"mr-3 text-sm font-medium neu-text",children:"All"}),(0,a.jsx)("button",{className:"w-14 h-7 rounded-full p-1 transition-all duration-300 ".concat(i?"bg-green-400":"bg-gray-300"),onClick:()=>n(!i),children:(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-white shadow-md transition-transform duration-300 ".concat(i?"translate-x-7":"translate-x-0")})}),(0,a.jsx)("span",{className:"ml-3 text-sm font-medium neu-text",children:"Veg Only"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((e,t)=>"combos"===e.category?(0,a.jsx)(eN,{item:e},"".concat(e.name,"-").concat(t)):(0,a.jsx)(ew,{item:e},"".concat(e.name,"-").concat(t)))}),0===l.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-lg neu-text-secondary",children:"No items found in this category"})})]})});var eI=(0,R.Pi)(function(){let[e,t]=(0,r.useState)(!1),[s,l]=(0,r.useState)("idle"),[o,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[g,y]=(0,r.useState)(null),[b,f]=(0,r.useState)(null),[j,v]=(0,r.useState)([]),N=(0,r.useRef)(!1),w=(0,r.useRef)(null),[k,C]=(0,r.useState)(!0),[I,A]=(0,r.useState)(!1),[P,T]=(0,r.useState)(!1),D=(0,r.useRef)(0),O=(0,r.useRef)(null),[R,z]=(0,r.useState)(!1),[F,_]=(0,r.useState)([]),[U,E]=(0,r.useState)(""),[Z,q]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=localStorage.getItem("stonepot_customer_phone");e&&(q(e),console.log("[App] Loaded returning customer phone:",e))},[]),(0,r.useEffect)(()=>{Z&&(localStorage.setItem("stonepot_customer_phone",Z),console.log("[App] Saved customer phone to localStorage:",Z))},[Z]);let[B,L]=(0,r.useState)(Array(32).fill(0)),[H,Q]=(0,r.useState)(0),K=(0,r.useRef)(null),X=(0,r.useRef)(null),J=(0,r.useRef)(null),Y=(0,r.useRef)(0),$=(0,r.useRef)(!1),et=(0,r.useRef)(0),es=(0,r.useRef)(null),ea=(0,r.useRef)(null),er=(0,r.useRef)(null),ei=(0,r.useRef)(0),en=(0,r.useRef)(null);(0,r.useRef)(null),(0,r.useRef)(0),(0,r.useRef)(!1),(0,r.useRef)(0),(0,r.useEffect)(()=>{if(e){ei.current=Date.now(),Q(0);let e=setInterval(()=>{Q(Math.floor((Date.now()-ei.current)/1e3))},1e3);return()=>clearInterval(e)}Q(0),ei.current=0},[e]),(0,r.useEffect)(()=>{if(!e)return;let t=e=>{let t=e.target.scrollTop;t>D.current&&t>50?C(!1):t<D.current&&C(!0),D.current=t},s=document.querySelector("main");return null==s||s.addEventListener("scroll",t),()=>{null==s||s.removeEventListener("scroll",t)}},[e]);let el=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8e3;O.current&&clearTimeout(O.current),A(!0),O.current=setTimeout(()=>{A(!1),O.current=null},e)},eo=()=>{O.current&&(clearTimeout(O.current),O.current=null),A(!0)},ec=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2?arguments[2]:void 0,a={id:Date.now().toString(),message:e,type:t,duration:s};_(e=>[...e,a])},ed=async(e,t)=>{try{console.log("[PartyKit] Connecting to room:",e);let s=new d;en.current=s;let a=t.tenantId||(null==u?void 0:u.tenantId)||"default",r="".concat(a,"_").concat(Z);s.onSync(e=>{console.log("[PartyKit] Synced state:",e),ec("Connected to group order","success")}),s.onParticipantJoined(e=>{e.id!==r&&ec("".concat(e.name," joined the order"),"participant")}),s.onParticipantLeft(e=>{ec("".concat(e.name," left"),"info")}),s.onItemAdded((e,t)=>{t.id!==r&&ec("".concat(t.name," added ").concat(e.dishName),"info")}),s.onItemRemoved((e,t)=>{t.id!==r&&ec("".concat(t.name," removed an item"),"info")}),s.onOrderFinalized(()=>{ec("Order has been finalized!","success",6e3)}),s.onError(e=>{console.error("[PartyKit] Error:",e),ec("Connection error. Reconnecting...","error")}),await s.connect(e,r,U||"Guest",t.circleId,a,Z),c.setRoomData({roomId:t.id||t.sessionId,circleId:t.circleId,circleName:t.circleName||"Group Order",currentUserId:r}),z(!0),console.log("[PartyKit] Connected successfully")}catch(e){console.error("[PartyKit] Connection failed:",e),ec("Failed to connect to group order","error")}},em=()=>{en.current&&(en.current.disconnect(),en.current=null),z(!1)},eu=()=>{if(0===M.items.length){ec("Your cart is empty","error");return}A(!1),T(!0)},ex=e=>{let t=new Int16Array(e.length);for(let s=0;s<e.length;s++){let a=Math.max(-1,Math.min(1,e[s]));t[s]=a<0?32768*a:32767*a}return t.buffer},ep=()=>{if(er.current)return;let e=0,t=()=>{e+=.05,L(Array.from({length:32},(t,s)=>Math.abs(.15*Math.sin(e+.5*s)+.1*Math.sin(1.3*e-.3*s)))),er.current=requestAnimationFrame(t)};t()},ey=()=>{er.current&&(cancelAnimationFrame(er.current),er.current=null)},eb=async()=>{try{console.log("[Restaurant] Starting session..."),m(!0),l("listening"),t(!0),ep(),console.log("[Restaurant] Requesting microphone permission..."),await ej(),console.log("[Restaurant] Microphone access granted");let e="https://stonepot-restaurant-334610188311.us-central1.run.app";console.log("[Restaurant] Creating backend session...");let s=await fetch("".concat(e,"/api/restaurant/sessions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:"demo-restaurant",userId:"demo-user",language:"en"})});if(!s.ok)throw Error("Failed to create session: ".concat(s.status));let a=await s.json();console.log("[Restaurant] Session created:",a),x(a);let r="".concat(e.replace("https://","wss://").replace("http://","ws://")).concat(a.websocketUrl);if(Z){let e=r.includes("?")?"&":"?";r+="".concat(e,"customerPhone=").concat(encodeURIComponent(Z)),console.log("[Restaurant] Adding returning customer phone to WebSocket URL")}K.current=new i(r),K.current.onAudio(async e=>{console.log("[Restaurant] Audio response received"),await eN(e)}),K.current.onMessage(e=>{console.log("[Restaurant] Message:",e.type),"session_ready"===e.type?l("listening"):"session_reconnecting"===e.type?(console.log("[Restaurant] Session reconnecting..."),l("thinking"),ec("Reconnecting session...","info")):"session_reconnect_failed"===e.type?(console.error("[Restaurant] Session reconnection failed"),l("idle"),ec("Session expired. Please start a new conversation.","error"),eC()):"error"===e.type&&(console.error("[Restaurant] Error:",e.message),ec(e.message||"An error occurred","error"))}),await K.current.connect("en"),console.log("[Restaurant] Connected to Vertex AI Live");let o=new n("https://theme-edge-worker.suyesh.workers.dev");y(o),await o.connect(a.sessionId),console.log("[Restaurant] Connected to display service"),o.on("initial_state",e=>{var t;console.log("[Restaurant] Initial state:",e),v(e.transcriptions||[]),(null===(t=e.displayUpdates)||void 0===t?void 0:t.length)>0&&f(e.displayUpdates[e.displayUpdates.length-1])}),o.on("update",e=>{var t,s,a,r,i,n,l,o;if(console.log("[Restaurant] Display update:",e),"transcription"===e.type){v(t=>[...t,e]);let a=(null===(s=e.data)||void 0===s?void 0:null===(t=s.text)||void 0===t?void 0:t.toLowerCase())||"";["cart","order","what did i","what have i","show me","whats in"].some(e=>a.includes(e))?eo():["add","also","and","want","get me","ill have","i need"].some(e=>a.includes(e))&&M.itemCount>0&&el(12e3)}else if("customer_update"===e.type)console.log("[Restaurant] Customer update from backend:",e.customer),e.customer&&(ee.setCustomer({name:e.customer.name,phone:e.customer.phone,email:e.customer.email||void 0}),e.customer.phone&&(q(e.customer.phone),localStorage.setItem("stonepot_customer_phone",e.customer.phone)));else if("customer_addresses"===e.type)console.log("[Restaurant] Customer addresses from backend:",(null===(a=e.addresses)||void 0===a?void 0:a.length)||0),e.addresses&&e.addresses.length>0&&sessionStorage.setItem("stonepot_saved_addresses",JSON.stringify(e.addresses));else{let t=["checkout_summary","payment_pending","address_verification"].includes(e.type);if(w.current&&(clearTimeout(w.current),w.current=null),f(e),t?(N.current=!0,w.current=setTimeout(()=>{N.current=!1,w.current=null},2e3)):N.current=!1,("dish_card"===e.type||"menu_item"===e.type||"combo_item"===e.type)&&(null===(o=e.data)||void 0===o?void 0:o.name)&&ef.highlightItem(e.data.name),"cart_item_added"===e.type&&(null===(r=e.data)||void 0===r?void 0:r.item)){let{dishName:t,quantity:s}=e.data.item;console.log("[Restaurant] Adding item to cart:",t,s);let a=ek.find(e=>e.name.toLowerCase()===t.toLowerCase());if(a){for(let e=0;e<(s||1);e++)if("choices"in a){let e=a.choices[0];M.addComboItem(a,e)}else M.addMenuItem(a);el(8e3)}}if("cart_updated"===e.type&&(null===(i=e.data)||void 0===i?void 0:i.cart)){console.log("[Restaurant] Cart updated from voice:",e.data.action);let t=e.data.cart;if(M.clearCart(),t.items&&t.items.length>0&&t.items.forEach(e=>{let t=ek.find(t=>t.name.toLowerCase()===e.dishName.toLowerCase());if(t)for(let s=0;s<e.quantity;s++)if("choices"in t){let s=e.customization||t.choices[0];M.addComboItem(t,s)}else M.addMenuItem(t)}),"remove"===e.data.action?el(1e4):"decrease"===e.data.action?el(8e3):"increase"===e.data.action&&el(6e3),c.roomId&&en.current&&"add"===e.data.action){let e=t.items[t.items.length-1];e&&en.current.sendAddItem({dishName:e.dishName,dishType:e.dishType,quantity:e.quantity,price:e.price,customization:e.customization})}}if("customer_info_captured"===e.type&&(null===(n=e.data)||void 0===n?void 0:n.customer)&&(E(e.data.customer.name),q(e.data.customer.phone),ec("Welcome, ".concat(e.data.customer.name,"!"),"success")),"circle_created"===e.type&&(null===(l=e.data)||void 0===l?void 0:l.circle)&&ec('Circle "'.concat(e.data.circle.name,'" created'),"success"),"member_invited"===e.type&&e.data&&ec("".concat(e.data.inviteeName," added to circle"),"success"),"collaborative_order_started"===e.type&&e.data){let{partykitRoomUrl:t,collaborativeOrder:s}=e.data;t&&s&&ed(t,s)}"collaborative_order_finalized"===e.type&&(c.finalize(),ec("Order finalized! Proceeding to payment...","success",6e3))}}),o.on("error",e=>{console.error("[Display service error:",e)}),m(!1),console.log("[Restaurant] Session started successfully")}catch(e){console.error("[Restaurant] Failed:",e),p(e.message),l("idle"),t(!1),m(!1),ey()}},ej=async()=>{let e=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),t=new AudioContext({sampleRate:16e3});X.current=t;let a=t.sampleRate;console.log("[Audio] Requested sample rate: 16000 Hz | Actual sample rate: ".concat(a," Hz")),16e3!==a&&(console.error("[Audio] ⚠️ SAMPLE RATE MISMATCH! Browser using ".concat(a," Hz instead of 16000 Hz")),console.error("[Audio] VAD will NOT work correctly - resampling required!")),await t.audioWorklet.addModule("/audio-processor.js");let r=t.createMediaStreamSource(e),i=new AudioWorkletNode(t,"audio-stream-processor");i.port.onmessage=async e=>{let{type:t,data:a,rms:r,duration:i}=e.data;if("speech-start"===t)"speaking"===s&&(console.log("[Audio] INTERRUPTION - User spoke while AI was speaking"),J.current&&(J.current.close().catch(()=>{}),J.current=null),ea.current&&(cancelAnimationFrame(ea.current),ea.current=null),Y.current=0,$.current=!1,K.current&&K.current.interrupt()),et.current=performance.now(),l("listening"),ey();else if("speech-end"===t);else if("audio-data"===t){var n;if(!(null===(n=K.current)||void 0===n?void 0:n.isActive())||P)return;let e=ex(new Float32Array(a));K.current.isActive()&&K.current.sendAudio(e)}},r.connect(i),i.connect(t.destination),l("listening"),console.log("[Restaurant] AudioWorklet streaming started")},ev=()=>{if(!es.current)return;let e=es.current,t=e.frequencyBinCount,s=new Uint8Array(t),a=()=>{e.getByteFrequencyData(s);let r=Math.floor(t/32),i=[];for(let e=0;e<32;e++){let t=e*r,a=t+r,n=0;for(let e=t;e<a;e++)n+=s[e];let l=Math.min(n/r/255*3,1);i.push(l)}L(i),ea.current=requestAnimationFrame(a)};a()},eN=async e=>{try{J.current||(J.current=new AudioContext({sampleRate:24e3}),Y.current=J.current.currentTime,es.current=J.current.createAnalyser(),es.current.fftSize=256,es.current.connect(J.current.destination));let t=J.current,s=new Int16Array(e),a=new Float32Array(s.length);for(let e=0;e<s.length;e++)a[e]=s[e]/(s[e]<0?32768:32767);let r=t.createBuffer(1,a.length,24e3);r.getChannelData(0).set(a);let i=t.createBufferSource();i.buffer=r,es.current?i.connect(es.current):i.connect(t.destination);let n=t.currentTime,o=Math.max(n,Y.current);i.start(o);let c=r.duration;Y.current=o+c,$.current||($.current=!0,l("speaking"),ev());let d=(o+c-t.currentTime)*1e3+200;setTimeout(()=>{t.currentTime>=Y.current-.05&&($.current=!1,l("listening"),ea.current&&(cancelAnimationFrame(ea.current),ea.current=null),ep())},Math.max(d,0))}catch(e){console.error("[Restaurant] Audio playback error:",e)}},ew=(e,t)=>{console.log("[Restaurant] Display action:",e,t),g?g.sendAction(e,t):console.error("[Restaurant] Display service not available")},eC=async()=>{O.current&&(clearTimeout(O.current),O.current=null),ea.current&&(cancelAnimationFrame(ea.current),ea.current=null),ey(),K.current&&(K.current.disconnect(),K.current=null),g&&(g.disconnect(),y(null)),em(),X.current&&(await X.current.close(),X.current=null),J.current&&(await J.current.close(),J.current=null),es.current=null,Y.current=0,$.current=!1,t(!1),l("idle"),L(Array(32).fill(0)),v([]),f(null)};return h?(0,a.jsx)("div",{className:"h-screen flex items-center justify-center bg-gradient-to-b from-[#f8f9fa] to-[#0a0a0a]",children:(0,a.jsxs)("div",{className:"max-w-md w-full mx-4 p-6 bg-red-500/10 border border-red-500/30 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2 text-red-400",children:"Error"}),(0,a.jsx)("p",{className:"text-sm text-red-300 mb-4",children:h}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Retry"})]})}):(0,a.jsxs)("div",{className:"h-screen flex flex-col neu-bg",children:[e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"neu-header transition-transform duration-300 ".concat(k?"translate-y-0":"-translate-y-full"),children:(0,a.jsxs)("div",{className:"header-content",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 md:w-10 md:h-10 neu-card rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg md:text-xl",children:"\uD83C\uDF7D️"})}),(0,a.jsx)("h1",{className:"text-sm md:text-base font-bold neu-text",children:"CFC"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,a.jsxs)("div",{className:"neu-concave px-2 py-1 md:px-4 md:py-2 rounded-full flex items-center gap-1 md:gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("listening"===s?"bg-blue-500 animate-pulse":"thinking"===s?"bg-yellow-500 animate-pulse":"speaking"===s?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,a.jsx)("span",{className:"text-xs font-medium neu-text capitalize hidden md:inline",children:s})]}),(0,a.jsxs)("button",{onClick:eC,className:"neu-button text-xs px-2 py-1 md:px-4 md:py-2 rounded-lg font-medium text-red-500",children:[(0,a.jsx)("span",{className:"hidden md:inline",children:"End Session"}),(0,a.jsx)("span",{className:"md:hidden",children:"End"})]})]})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6 pb-32",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)(eS,{}),b&&("dish_card"===b.type||"menu_item"===b.type||"combo_item"===b.type)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-6 animate-fade-in",children:(0,a.jsx)("div",{className:"max-w-md w-full animate-scale-in",children:(0,a.jsx)(S,{visualData:b,onAction:ew})})}),b&&("checkout_summary"===b.type||"payment_pending"===b.type||"order_confirmed"===b.type||"address_verification"===b.type)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-6 animate-fade-in",children:(0,a.jsx)("div",{className:"max-w-md w-full h-full max-h-[90vh] animate-scale-in",children:(0,a.jsx)(S,{visualData:b,onAction:ew})})})]})}),(0,a.jsx)("div",{className:"neu-voice-mic ".concat("listening"===s?"animate-pulse":""),children:(0,a.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,a.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 100 100",style:{willChange:"transform"},children:B.slice(0,16).map((e,t)=>{let r=t/16*Math.PI*2-Math.PI/2,i=25+(5+15*e),n=50+25*Math.cos(r),l=50+25*Math.sin(r),o=50+Math.cos(r)*i,c=50+Math.sin(r)*i,d="thinking"===s?"rgba(255, 149, 0, ".concat(.4+.6*e,")"):"speaking"===s?"rgba(34, 197, 94, ".concat(.4+.6*e,")"):"rgba(59, 130, 246, ".concat(.4+.6*e,")");return(0,a.jsx)("line",{x1:n,y1:l,x2:o,y2:c,stroke:d,strokeWidth:"2.5",strokeLinecap:"round",style:{filter:"drop-shadow(0 0 ".concat(2+4*e,"px ").concat(d,")"),transition:"all 75ms ease-out"}},t)})}),o&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/10 backdrop-blur-sm rounded-full",children:(0,a.jsxs)("svg",{className:"animate-spin h-12 w-12",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",fill:"none"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})}),(0,a.jsx)(W,{onClick:()=>A(!0)}),I&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex",onClick:()=>A(!1),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity"}),(0,a.jsx)("div",{className:"ml-auto relative w-full max-w-md h-full shadow-2xl",onClick:e=>e.stopPropagation(),style:{animation:"slideInFromRight 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},children:(0,a.jsx)(V,{onPlaceOrder:eu})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"neu-header",children:(0,a.jsx)("div",{className:"header-content",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 md:w-10 md:h-10 neu-card rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg md:text-xl",children:"\uD83C\uDF7D️"})}),(0,a.jsx)("h1",{className:"text-sm md:text-base font-bold neu-text",children:"The Coorg Food Company"})]})})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto pt-16 md:pt-20 p-6",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsx)(eS,{})})}),(0,a.jsx)(W,{onClick:()=>A(!0)}),(0,a.jsxs)("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-40 flex flex-col items-center gap-3",children:[(0,a.jsxs)("button",{onClick:eb,className:"relative w-20 h-20 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 shadow-lg hover:shadow-xl transition-all hover:scale-105 active:scale-95 group","aria-label":"Start voice conversation",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-blue-500/30 animate-ping"}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 opacity-80 blur-md group-hover:blur-lg transition-all"}),(0,a.jsx)("div",{className:"absolute inset-2 rounded-full bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 flex items-center justify-center",children:(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-white/20 animate-pulse"})})]}),(0,a.jsx)("span",{className:"text-sm font-semibold neu-text",children:"Start Voice Order"})]}),I&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex",onClick:()=>A(!1),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity"}),(0,a.jsx)("div",{className:"ml-auto relative w-full max-w-md h-full shadow-2xl",onClick:e=>e.stopPropagation(),style:{animation:"slideInFromRight 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},children:(0,a.jsx)(V,{onPlaceOrder:eu})})]})]}),(0,a.jsx)(eg,{toasts:F,onRemove:e=>{_(t=>t.filter(t=>t.id!==e))}}),(0,a.jsx)(G,{isOpen:R,onClose:()=>{em(),ec("Left group order","info")}}),(0,a.jsx)(eh,{isOpen:P,onClose:()=>{T(!1)},sessionId:null==u?void 0:u.sessionId,backendUrl:"https://stonepot-restaurant-334610188311.us-central1.run.app"})]})})}},function(e){e.O(0,[53,577,115,364,744],function(){return e(e.s=314)}),_N_E=e.O()}]);